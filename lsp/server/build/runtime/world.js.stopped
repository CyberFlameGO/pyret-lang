const $__C=stopify.compiler;var $__T=stopify;var $__R=$__T.newRTS("lazy");var $S=stopify.init($__R);var fun0;if($__R.mode)fun0=function funExpr0(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[fun1,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[fun1,newTarget]}var restoreNextFrame=()=>{return funExpr0.call(this)};var fun1;if($__R.mode){fun1=function funExpr1(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[fun23,fun34,imageLibrary00,OnKey,fun24,fun35,rawJsworld00,getKeyCodeName,fun25,fun36,app89,checkHandler,fun37,anchorRuntime00,OutputConfig,fun38,fun39,fun29,OnMouse,isOpaqueOnTick,adaptWorldFunction,WorldConfigOption,isOpaqueToDraw,bigBangNoPauseResume,makeBigBang,makeBigBangFromDict,bigBangFromDictNoPauseResume,isOpaqueCloseWhenStopConfig,isOpaque,isCloseWhenStopConfig,isOutputConfig,isOpaqueOutputConfig,app0,makeOpaque,app1,POpaque,app2,isImage,app3,app4,CloseWhenStop,makeReactorRaw,makeReactor,makeCheckType,app5,app6,jsnums00,bigBangFromDict,bigBang,app80,app70,app81,app92,fun40,fun30,fun41,OnTick,StopWhen,fun31,fun42,app73,fun32,fun43,isOpaqueWorldConfigOption,DefaultDrawingOutput,fun33,fun44,app86,app97,DEFAULT_TICK_DELAY,ToDraw,isWorldConfigOption,fun22,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[fun23,fun34,imageLibrary00,OnKey,fun24,fun35,rawJsworld00,getKeyCodeName,fun25,fun36,app89,checkHandler,fun37,anchorRuntime00,OutputConfig,fun38,fun39,fun29,OnMouse,isOpaqueOnTick,adaptWorldFunction,WorldConfigOption,isOpaqueToDraw,bigBangNoPauseResume,makeBigBang,makeBigBangFromDict,bigBangFromDictNoPauseResume,isOpaqueCloseWhenStopConfig,isOpaque,isCloseWhenStopConfig,isOutputConfig,isOpaqueOutputConfig,app0,makeOpaque,app1,POpaque,app2,isImage,app3,app4,CloseWhenStop,makeReactorRaw,makeReactor,makeCheckType,app5,app6,jsnums00,bigBangFromDict,bigBang,app80,app70,app81,app92,fun40,fun30,fun41,OnTick,StopWhen,fun31,fun42,app73,fun32,fun43,isOpaqueWorldConfigOption,DefaultDrawingOutput,fun33,fun44,app86,app97,DEFAULT_TICK_DELAY,ToDraw,isWorldConfigOption,fun22,newTarget]}var restoreNextFrame=()=>{return funExpr1.call(this)};var imageLibrary00,rawJsworld00,jsnums00,anchorRuntime00,makeCheckType,POpaque,isOpaque,makeOpaque,isImage,isOpaqueWorldConfigOption,isOpaqueOnTick,isOpaqueToDraw,makeReactorRaw,makeBigBangFromDict,bigBang,bigBangNoPauseResume,WorldConfigOption,isWorldConfigOption,adaptWorldFunction,OnTick,OnKey,getKeyCodeName,OnMouse,OutputConfig,isOutputConfig,isOpaqueOutputConfig,ToDraw,DefaultDrawingOutput,CloseWhenStop,isCloseWhenStopConfig,isOpaqueCloseWhenStopConfig,StopWhen,checkHandler,DEFAULT_TICK_DELAY,app0,app1,app2,app3,app4,app5,app6,makeReactor,bigBangFromDict,bigBangFromDictNoPauseResume,makeBigBang,fun22,fun23,fun24,fun25,app70,fun29,app73,fun30,app80,fun31,app81,app86,fun32,app89,fun33,app92,app97,fun34,fun35,fun36,fun37,fun38,fun39,fun40,fun41,fun42,fun43,fun44;if($__R.mode){imageLibrary00={box:undefined};rawJsworld00={box:undefined};jsnums00={box:undefined};anchorRuntime00={box:undefined};makeCheckType={box:undefined};POpaque={box:undefined};isOpaque={box:undefined};makeOpaque={box:undefined};isImage={box:undefined};isOpaqueWorldConfigOption={box:undefined};isOpaqueOnTick={box:undefined};isOpaqueToDraw={box:undefined};makeReactorRaw={box:undefined};makeBigBangFromDict={box:undefined};bigBang={box:undefined};bigBangNoPauseResume={box:undefined};WorldConfigOption={box:undefined};isWorldConfigOption={box:undefined};adaptWorldFunction={box:undefined};OnTick={box:undefined};OnKey={box:undefined};getKeyCodeName={box:undefined};OnMouse={box:undefined};OutputConfig={box:undefined};isOutputConfig={box:undefined};isOpaqueOutputConfig={box:undefined};ToDraw={box:undefined};DefaultDrawingOutput={box:undefined};CloseWhenStop={box:undefined};isCloseWhenStopConfig={box:undefined};isOpaqueCloseWhenStopConfig={box:undefined};StopWhen={box:undefined};checkHandler={box:undefined};DEFAULT_TICK_DELAY={box:undefined};makeCheckType.box=function fun49(pred,type){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[fun2,app7,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[fun2,app7,newTarget]}var restoreNextFrame=()=>{return fun49.call(this,pred,type)};var app7,fun2;if($__R.mode){type={box:type};pred={box:pred}}try{if($__R.mode){app7=$S.suspend()}else if(target===0)app7=$__R.stack[$__R.stack.length-1].f()}catch(exn0){if(exn0 instanceof $__T.Capture){exn0.stack.push({kind:"rest",f:restoreNextFrame,index:0,this:this});captureLocals(exn0.stack[exn0.stack.length-1])}else{$__R.pushTrace(": in makeCheckType")}throw exn0}if($__R.mode)fun2=function funExpr2(val){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app9,app8,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app9,app8,newTarget]}var restoreNextFrame=()=>{return funExpr2.call(this,val)};var app8,app9;try{if($__R.mode){app8=pred.box(val)}else if(target===1)app8=$__R.stack[$__R.stack.length-1].f()}catch(exn1){if(exn1 instanceof $__T.Capture){exn1.stack.push({kind:"rest",f:restoreNextFrame,index:1,this:this});captureLocals(exn1.stack[exn1.stack.length-1])}else{$__R.pushTrace("Line 15: in (anonymous function)")}throw exn1}if($__R.mode&&!app8||!$__R.mode&&target===2){try{if($__R.mode){app9=new $S.g.Error(`Evaluating an expression failed. It was supposed to produce to a ${type.box}, but it produced a non-${type.box} value: ${val}`)}else if(target===2)app9=$__R.stack[$__R.stack.length-1].f()}catch(exn2){if(exn2 instanceof $__T.Capture){exn2.stack.push({kind:"rest",f:restoreNextFrame,index:2,this:this});captureLocals(exn2.stack[exn2.stack.length-1])}else{$__R.pushTrace("Line 16: in (anonymous function)")}throw exn2}if($__R.mode)$__R.pushTrace("Line 16: in (anonymous function)");throw app9}$__R.remainingStack++;if(newTarget)return this};{let retval0=fun2;$__R.remainingStack++;return newTarget&&!(retval0 instanceof Object)?this:retval0}$__R.remainingStack++;if(newTarget)return this};POpaque.box=function fun50(val,equals){this.val=val;this.equals=equals};isOpaque.box=function fun51(val){return val instanceof POpaque.box};makeOpaque.box=function fun52(val,equals){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app10,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app10,newTarget]}var restoreNextFrame=()=>{return fun52.call(this,val,equals)};var app10;try{if($__R.mode){app10=$S.suspend()}else if(target===3)app10=$__R.stack[$__R.stack.length-1].f()}catch(exn3){if(exn3 instanceof $__T.Capture){exn3.stack.push({kind:"rest",f:restoreNextFrame,index:3,this:this});captureLocals(exn3.stack[exn3.stack.length-1])}else{$__R.pushTrace(": in makeOpaque")}throw exn3}if($__R.mode)$__R.remainingStack++;if($__R.mode)return new POpaque.box(val,equals);else;$__R.remainingStack++;if(newTarget)return this};makeBigBangFromDict.box=function fun54(shouldPauseAndResume){var fun14;shouldPauseAndResume={box:shouldPauseAndResume};fun14=function bigBangFromDict(init,dict,tracer,insertNode){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app43,app44,add,app45,app35,delay,app36,app37,app38,app39,handlers,title,arg06,app40,arg07,app41,arg08,app31,app42,arg09,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app43,app44,add,app45,app35,delay,app36,app37,app38,app39,handlers,title,arg06,app40,arg07,app41,arg08,app31,app42,arg09,newTarget]}var restoreNextFrame=()=>{return bigBangFromDict.call(this,init,dict,tracer,insertNode)};var handlers,add,app31,title,app35,app36,app37,delay,app38,arg07,arg06,app39,arg09,arg08,app40,app41,app42,app43,app44,app45;if($__R.mode){dict={box:dict};handlers={box:undefined};add={box:undefined};add.box=function fun53(k,constr){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app34,arg04,arg05,app32,app33,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app34,arg04,arg05,app32,app33,newTarget]}var restoreNextFrame=()=>{return fun53.call(this,k,constr)};var app32,app33,arg05,arg04,app34;try{if($__R.mode){app32=$S.suspend()}else if(target===5)app32=$__R.stack[$__R.stack.length-1].f()}catch(exn4){if(exn4 instanceof $__T.Capture){exn4.stack.push({kind:"rest",f:restoreNextFrame,index:5,this:this});captureLocals(exn4.stack[exn4.stack.length-1])}else{$__R.pushTrace(": in add")}throw exn4}try{if($__R.mode){app33=dict.box.hasOwnProperty(k)}else if(target===6)app33=$__R.stack[$__R.stack.length-1].f()}catch(exn5){if(exn5 instanceof $__T.Capture){exn5.stack.push({kind:"rest",f:restoreNextFrame,index:6,this:this});captureLocals(exn5.stack[exn5.stack.length-1])}else{$__R.pushTrace("Line 122: in add")}throw exn5}if($__R.mode&&app33||!$__R.mode&&(target===9||target===8||target===7)){try{if($__R.mode){arg05=new constr(dict.box[k])}else if(target===7)arg05=$__R.stack[$__R.stack.length-1].f()}catch(exn6){if(exn6 instanceof $__T.Capture){exn6.stack.push({kind:"rest",f:restoreNextFrame,index:7,this:this});captureLocals(exn6.stack[exn6.stack.length-1])}else{$__R.pushTrace("Line 123: in add")}throw exn6}try{if($__R.mode){arg04=makeOpaque.box(arg05)}else if(target===8)arg04=$__R.stack[$__R.stack.length-1].f()}catch(exn7){if(exn7 instanceof $__T.Capture){exn7.stack.push({kind:"rest",f:restoreNextFrame,index:8,this:this});captureLocals(exn7.stack[exn7.stack.length-1])}else{$__R.pushTrace("Line 123: in add")}throw exn7}try{if($__R.mode){app34=handlers.box.push(arg04)}else if(target===9)app34=$__R.stack[$__R.stack.length-1].f()}catch(exn8){if(exn8 instanceof $__T.Capture){exn8.stack.push({kind:"rest",f:restoreNextFrame,index:9,this:this});captureLocals(exn8.stack[exn8.stack.length-1])}else{$__R.pushTrace("Line 123: in add")}throw exn8}}$__R.remainingStack++;if(newTarget)return this}}try{if($__R.mode){app31=$S.suspend()}else if(target===10)app31=$__R.stack[$__R.stack.length-1].f()}catch(exn9){if(exn9 instanceof $__T.Capture){exn9.stack.push({kind:"rest",f:restoreNextFrame,index:10,this:this});captureLocals(exn9.stack[exn9.stack.length-1])}else{$__R.pushTrace(": in bigBangFromDict")}throw exn9}if($__R.mode){handlers.box=[];title="Reactor"}try{if($__R.mode){app35=dict.box.hasOwnProperty("title")}else if(target===11)app35=$__R.stack[$__R.stack.length-1].f()}catch(exn10){if(exn10 instanceof $__T.Capture){exn10.stack.push({kind:"rest",f:restoreNextFrame,index:11,this:this});captureLocals(exn10.stack[exn10.stack.length-1])}else{$__R.pushTrace("Line 127: in bigBangFromDict")}throw exn10}if($__R.mode&&app35){if($__R.mode)title=dict.box["title"]}try{if($__R.mode){app36=dict.box.hasOwnProperty("on-tick")}else if(target===12)app36=$__R.stack[$__R.stack.length-1].f()}catch(exn11){if(exn11 instanceof $__T.Capture){exn11.stack.push({kind:"rest",f:restoreNextFrame,index:12,this:this});captureLocals(exn11.stack[exn11.stack.length-1])}else{$__R.pushTrace("Line 130: in bigBangFromDict")}throw exn11}if($__R.mode&&app36||!$__R.mode&&(target===20||target===19||target===18||target===17||target===16||target===15||target===14||target===13)){try{if($__R.mode){app37=dict.box.hasOwnProperty("seconds-per-tick")}else if(target===13)app37=$__R.stack[$__R.stack.length-1].f()}catch(exn12){if(exn12 instanceof $__T.Capture){exn12.stack.push({kind:"rest",f:restoreNextFrame,index:13,this:this});captureLocals(exn12.stack[exn12.stack.length-1])}else{$__R.pushTrace("Line 131: in bigBangFromDict")}throw exn12}if($__R.mode&&app37||!$__R.mode&&(target===17||target===16||target===15||target===14)){if($__R.mode)delay=dict.box["seconds-per-tick"];try{if($__R.mode){app38=jsnums00.box.toFixnum(delay)}else if(target===14)app38=$__R.stack[$__R.stack.length-1].f()}catch(exn13){if(exn13 instanceof $__T.Capture){exn13.stack.push({kind:"rest",f:restoreNextFrame,index:14,this:this});captureLocals(exn13.stack[exn13.stack.length-1])}else{$__R.pushTrace("Line 133: in bigBangFromDict")}throw exn13}if($__R.mode)delay=app38;try{if($__R.mode){arg07=new OnTick.box(dict.box["on-tick"],delay*1000)}else if(target===15)arg07=$__R.stack[$__R.stack.length-1].f()}catch(exn14){if(exn14 instanceof $__T.Capture){exn14.stack.push({kind:"rest",f:restoreNextFrame,index:15,this:this});captureLocals(exn14.stack[exn14.stack.length-1])}else{$__R.pushTrace("Line 134: in bigBangFromDict")}throw exn14}try{if($__R.mode){arg06=makeOpaque.box(arg07)}else if(target===16)arg06=$__R.stack[$__R.stack.length-1].f()}catch(exn15){if(exn15 instanceof $__T.Capture){exn15.stack.push({kind:"rest",f:restoreNextFrame,index:16,this:this});captureLocals(exn15.stack[exn15.stack.length-1])}else{$__R.pushTrace("Line 134: in bigBangFromDict")}throw exn15}try{if($__R.mode){app39=handlers.box.push(arg06)}else if(target===17)app39=$__R.stack[$__R.stack.length-1].f()}catch(exn16){if(exn16 instanceof $__T.Capture){exn16.stack.push({kind:"rest",f:restoreNextFrame,index:17,this:this});captureLocals(exn16.stack[exn16.stack.length-1])}else{$__R.pushTrace("Line 134: in bigBangFromDict")}throw exn16}}else if($__R.mode||!$__R.mode&&(target===20||target===19||target===18)){try{if($__R.mode){arg09=new OnTick.box(dict.box["on-tick"],DEFAULT_TICK_DELAY.box*1000)}else if(target===18)arg09=$__R.stack[$__R.stack.length-1].f()}catch(exn17){if(exn17 instanceof $__T.Capture){exn17.stack.push({kind:"rest",f:restoreNextFrame,index:18,this:this});captureLocals(exn17.stack[exn17.stack.length-1])}else{$__R.pushTrace("Line 137: in bigBangFromDict")}throw exn17}try{if($__R.mode){arg08=makeOpaque.box(arg09)}else if(target===19)arg08=$__R.stack[$__R.stack.length-1].f()}catch(exn18){if(exn18 instanceof $__T.Capture){exn18.stack.push({kind:"rest",f:restoreNextFrame,index:19,this:this});captureLocals(exn18.stack[exn18.stack.length-1])}else{$__R.pushTrace("Line 137: in bigBangFromDict")}throw exn18}try{if($__R.mode){app40=handlers.box.push(arg08)}else if(target===20)app40=$__R.stack[$__R.stack.length-1].f()}catch(exn19){if(exn19 instanceof $__T.Capture){exn19.stack.push({kind:"rest",f:restoreNextFrame,index:20,this:this});captureLocals(exn19.stack[exn19.stack.length-1])}else{$__R.pushTrace("Line 137: in bigBangFromDict")}throw exn19}}}try{if($__R.mode){app41=add.box("on-mouse",OnMouse.box)}else if(target===21)app41=$__R.stack[$__R.stack.length-1].f()}catch(exn20){if(exn20 instanceof $__T.Capture){exn20.stack.push({kind:"rest",f:restoreNextFrame,index:21,this:this});captureLocals(exn20.stack[exn20.stack.length-1])}else{$__R.pushTrace("Line 140: in bigBangFromDict")}throw exn20}try{if($__R.mode){app42=add.box("on-key",OnKey.box)}else if(target===22)app42=$__R.stack[$__R.stack.length-1].f()}catch(exn21){if(exn21 instanceof $__T.Capture){exn21.stack.push({kind:"rest",f:restoreNextFrame,index:22,this:this});captureLocals(exn21.stack[exn21.stack.length-1])}else{$__R.pushTrace("Line 141: in bigBangFromDict")}throw exn21}try{if($__R.mode){app43=add.box("to-draw",ToDraw.box)}else if(target===23)app43=$__R.stack[$__R.stack.length-1].f()}catch(exn22){if(exn22 instanceof $__T.Capture){exn22.stack.push({kind:"rest",f:restoreNextFrame,index:23,this:this});captureLocals(exn22.stack[exn22.stack.length-1])}else{$__R.pushTrace("Line 142: in bigBangFromDict")}throw exn22}try{if($__R.mode){app44=add.box("stop-when",StopWhen.box)}else if(target===24)app44=$__R.stack[$__R.stack.length-1].f()}catch(exn23){if(exn23 instanceof $__T.Capture){exn23.stack.push({kind:"rest",f:restoreNextFrame,index:24,this:this});captureLocals(exn23.stack[exn23.stack.length-1])}else{$__R.pushTrace("Line 143: in bigBangFromDict")}throw exn23}try{if($__R.mode){app45=add.box("close-when-stop",CloseWhenStop.box)}else if(target===25)app45=$__R.stack[$__R.stack.length-1].f()}catch(exn24){if(exn24 instanceof $__T.Capture){exn24.stack.push({kind:"rest",f:restoreNextFrame,index:25,this:this});captureLocals(exn24.stack[exn24.stack.length-1])}else{$__R.pushTrace("Line 144: in bigBangFromDict")}throw exn24}if($__R.mode&&shouldPauseAndResume.box){if($__R.mode)$__R.remainingStack++;if($__R.mode)return bigBang.box(init,handlers.box,tracer,title,insertNode);else;}if($__R.mode)$__R.remainingStack++;if($__R.mode)return bigBangNoPauseResume.box(init,handlers.box,tracer,title,insertNode);else;$__R.remainingStack++;if(newTarget)return this};return fun14}}try{if($__R.mode){app0=$S.suspend()}else if(target===28)app0=$__R.stack[$__R.stack.length-1].f()}catch(exn25){if(exn25 instanceof $__T.Capture){exn25.stack.push({kind:"rest",f:restoreNextFrame,index:28,this:this});captureLocals(exn25.stack[exn25.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn25}try{if($__R.mode){imageLibrary00.box=$S.g.require.call(void 0,"./image.arr.js")}else if(target===29)imageLibrary00.box=$__R.stack[$__R.stack.length-1].f()}catch(exn26){if(exn26 instanceof $__T.Capture){exn26.stack.push({kind:"rest",f:restoreNextFrame,index:29,this:this});captureLocals(exn26.stack[exn26.stack.length-1])}else{$__R.pushTrace("Line 1: in (anonymous function)")}throw exn26}try{if($__R.mode){app1=$S.g.require.call(void 0,"./world-lib.js")}else if(target===30)app1=$__R.stack[$__R.stack.length-1].f()}catch(exn27){if(exn27 instanceof $__T.Capture){exn27.stack.push({kind:"rest",f:restoreNextFrame,index:30,this:this});captureLocals(exn27.stack[exn27.stack.length-1])}else{$__R.pushTrace("Line 2: in (anonymous function)")}throw exn27}if($__R.mode)rawJsworld00.box=app1.jsworld;try{if($__R.mode){jsnums00.box=$S.g.require.call(void 0,"./js-numbers.js")}else if(target===31)jsnums00.box=$__R.stack[$__R.stack.length-1].f()}catch(exn28){if(exn28 instanceof $__T.Capture){exn28.stack.push({kind:"rest",f:restoreNextFrame,index:31,this:this});captureLocals(exn28.stack[exn28.stack.length-1])}else{$__R.pushTrace("Line 3: in (anonymous function)")}throw exn28}try{if($__R.mode){anchorRuntime00.box=$S.g.require.call(void 0,"./runtime.js")}else if(target===32)anchorRuntime00.box=$__R.stack[$__R.stack.length-1].f()}catch(exn29){if(exn29 instanceof $__T.Capture){exn29.stack.push({kind:"rest",f:restoreNextFrame,index:32,this:this});captureLocals(exn29.stack[exn29.stack.length-1])}else{$__R.pushTrace("Line 4: in (anonymous function)")}throw exn29}try{if($__R.mode){app2=$S.g.console.log("image library",imageLibrary00.box)}else if(target===33)app2=$__R.stack[$__R.stack.length-1].f()}catch(exn30){if(exn30 instanceof $__T.Capture){exn30.stack.push({kind:"rest",f:restoreNextFrame,index:33,this:this});captureLocals(exn30.stack[exn30.stack.length-1])}else{$__R.pushTrace("Line 6: in (anonymous function)")}throw exn30}try{if($__R.mode){app3=$S.g.console.log("rawJsworld",rawJsworld00.box)}else if(target===34)app3=$__R.stack[$__R.stack.length-1].f()}catch(exn31){if(exn31 instanceof $__T.Capture){exn31.stack.push({kind:"rest",f:restoreNextFrame,index:34,this:this});captureLocals(exn31.stack[exn31.stack.length-1])}else{$__R.pushTrace("Line 7: in (anonymous function)")}throw exn31}try{if($__R.mode){app4=$S.g.console.log("jsnums",jsnums00.box)}else if(target===35)app4=$__R.stack[$__R.stack.length-1].f()}catch(exn32){if(exn32 instanceof $__T.Capture){exn32.stack.push({kind:"rest",f:restoreNextFrame,index:35,this:this});captureLocals(exn32.stack[exn32.stack.length-1])}else{$__R.pushTrace("Line 8: in (anonymous function)")}throw exn32}try{if($__R.mode){app5=$S.g.console.log("anchorRuntime",anchorRuntime00.box)}else if(target===36)app5=$__R.stack[$__R.stack.length-1].f()}catch(exn33){if(exn33 instanceof $__T.Capture){exn33.stack.push({kind:"rest",f:restoreNextFrame,index:36,this:this});captureLocals(exn33.stack[exn33.stack.length-1])}else{$__R.pushTrace("Line 9: in (anonymous function)")}throw exn33}try{if($__R.mode){app6=$S.g.console.log("module.exports",$S.g.module.exports)}else if(target===37)app6=$__R.stack[$__R.stack.length-1].f()}catch(exn34){if(exn34 instanceof $__T.Capture){exn34.stack.push({kind:"rest",f:restoreNextFrame,index:37,this:this});captureLocals(exn34.stack[exn34.stack.length-1])}else{$__R.pushTrace("Line 10: in (anonymous function)")}throw exn34}if($__R.mode){isImage.box=imageLibrary00.box["is-image"];isOpaqueWorldConfigOption.box=function funExpr3(v){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app12,and0,app11,x00,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app12,and0,app11,x00,newTarget]}var restoreNextFrame=()=>{return funExpr3.call(this,v)};var app11,x00,and0,app12;try{if($__R.mode){app11=$S.suspend()}else if(target===38)app11=$__R.stack[$__R.stack.length-1].f()}catch(exn35){if(exn35 instanceof $__T.Capture){exn35.stack.push({kind:"rest",f:restoreNextFrame,index:38,this:this});captureLocals(exn35.stack[exn35.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn35}if($__R.mode)x00=isOpaque.box(v);if($__R.mode&&x00||!$__R.mode&&target===40){try{if($__R.mode){app12=isWorldConfigOption.box(v.val)}else if(target===40)app12=$__R.stack[$__R.stack.length-1].f()}catch(exn36){if(exn36 instanceof $__T.Capture){exn36.stack.push({kind:"rest",f:restoreNextFrame,index:40,this:this});captureLocals(exn36.stack[exn36.stack.length-1])}else{$__R.pushTrace("Line 42: in (anonymous function)")}throw exn36}if($__R.mode)and0=app12}else if($__R.mode){if($__R.mode)and0=x00}{let retval1=and0;$__R.remainingStack++;return newTarget&&!(retval1 instanceof Object)?this:retval1}$__R.remainingStack++;if(newTarget)return this};isOpaqueOnTick.box=function funExpr4(v){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[and1,x01,app13,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[and1,x01,app13,newTarget]}var restoreNextFrame=()=>{return funExpr4.call(this,v)};var app13,x01,and1;try{if($__R.mode){app13=$S.suspend()}else if(target===41)app13=$__R.stack[$__R.stack.length-1].f()}catch(exn37){if(exn37 instanceof $__T.Capture){exn37.stack.push({kind:"rest",f:restoreNextFrame,index:41,this:this});captureLocals(exn37.stack[exn37.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn37}if($__R.mode)x01=isOpaque.box(v);if($__R.mode&&x01){if($__R.mode)and1=v.val instanceof OnTick.box}else if($__R.mode){if($__R.mode)and1=x01}{let retval2=and1;$__R.remainingStack++;return newTarget&&!(retval2 instanceof Object)?this:retval2}$__R.remainingStack++;if(newTarget)return this};isOpaqueToDraw.box=function funExpr5(v){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[and2,x02,app14,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[and2,x02,app14,newTarget]}var restoreNextFrame=()=>{return funExpr5.call(this,v)};var app14,x02,and2;try{if($__R.mode){app14=$S.suspend()}else if(target===43)app14=$__R.stack[$__R.stack.length-1].f()}catch(exn38){if(exn38 instanceof $__T.Capture){exn38.stack.push({kind:"rest",f:restoreNextFrame,index:43,this:this});captureLocals(exn38.stack[exn38.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn38}if($__R.mode)x02=isOpaque.box(v);if($__R.mode&&x02){if($__R.mode)and2=v.val instanceof ToDraw.box}else if($__R.mode){if($__R.mode)and2=x02}{let retval3=and2;$__R.remainingStack++;return newTarget&&!(retval3 instanceof Object)?this:retval3}$__R.remainingStack++;if(newTarget)return this};makeReactor=function funExpr6(init,handlers){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app16,fun3,initialWorldValue,app15,arr,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app16,fun3,initialWorldValue,app15,arr,newTarget]}var restoreNextFrame=()=>{return funExpr6.call(this,init,handlers)};var app15,arr,initialWorldValue,fun3,app16;try{if($__R.mode){app15=$S.suspend()}else if(target===45)app15=$__R.stack[$__R.stack.length-1].f()}catch(exn39){if(exn39 instanceof $__T.Capture){exn39.stack.push({kind:"rest",f:restoreNextFrame,index:45,this:this});captureLocals(exn39.stack[exn39.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn39}if($__R.mode){arr=handlers;initialWorldValue=init;fun3=function funExpr7(h){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app18,app17,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app18,app17,newTarget]}var restoreNextFrame=()=>{return funExpr7.call(this,h)};var app17,app18;try{if($__R.mode){app17=$S.suspend()}else if(target===46)app17=$__R.stack[$__R.stack.length-1].f()}catch(exn40){if(exn40 instanceof $__T.Capture){exn40.stack.push({kind:"rest",f:restoreNextFrame,index:46,this:this});captureLocals(exn40.stack[exn40.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn40}try{if($__R.mode){app18=checkHandler.box(h)}else if(target===47)app18=$__R.stack[$__R.stack.length-1].f()}catch(exn41){if(exn41 instanceof $__T.Capture){exn41.stack.push({kind:"rest",f:restoreNextFrame,index:47,this:this});captureLocals(exn41.stack[exn41.stack.length-1])}else{$__R.pushTrace("Line 54: in (anonymous function)")}throw exn41}$__R.remainingStack++;if(newTarget)return this}}try{if($__R.mode){app16=arr.map(fun3)}else if(target===48)app16=$__R.stack[$__R.stack.length-1].f()}catch(exn42){if(exn42 instanceof $__T.Capture){exn42.stack.push({kind:"rest",f:restoreNextFrame,index:48,this:this});captureLocals(exn42.stack[exn42.stack.length-1])}else{$__R.pushTrace("Line 54: in (anonymous function)")}throw exn42}if($__R.mode)$__R.remainingStack++;if($__R.mode)return makeReactorRaw.box(init,arr,false,[]);else;$__R.remainingStack++;if(newTarget)return this};makeReactorRaw.box=function funExpr8(init,handlersArray,tracing,trace){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app19,self00,fun4,fun5,fun6,fun7,fun8,fun9,fun10,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app19,self00,fun4,fun5,fun6,fun7,fun8,fun9,fun10,newTarget]}var restoreNextFrame=()=>{return funExpr8.call(this,init,handlersArray,tracing,trace)};var app19,fun4,fun5,fun6,fun7,fun8,fun9,fun10,self00;if($__R.mode){trace={box:trace};tracing={box:tracing};handlersArray={box:handlersArray};init={box:init}}try{if($__R.mode){app19=$S.suspend()}else if(target===50)app19=$__R.stack[$__R.stack.length-1].f()}catch(exn43){if(exn43 instanceof $__T.Capture){exn43.stack.push({kind:"rest",f:restoreNextFrame,index:50,this:this});captureLocals(exn43.stack[exn43.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn43}if($__R.mode){fun4=function funExpr9(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index}function captureLocals(frame){}var restoreNextFrame=()=>{return funExpr9.call(this)};{let retval4=init.box;$__R.remainingStack++;return newTarget&&!(retval4 instanceof Object)?this:retval4}$__R.remainingStack++;if(newTarget)return this};fun5=function funExpr10(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app21,fun11,app20,drawer,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app21,fun11,app20,drawer,newTarget]}var restoreNextFrame=()=>{return funExpr10.call(this)};var fun11,app20,drawer,app21;if($__R.mode)fun11=function funExpr11(h){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app22,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app22,newTarget]}var restoreNextFrame=()=>{return funExpr11.call(this,h)};var app22;try{if($__R.mode){app22=$S.suspend()}else if(target===51)app22=$__R.stack[$__R.stack.length-1].f()}catch(exn44){if(exn44 instanceof $__T.Capture){exn44.stack.push({kind:"rest",f:restoreNextFrame,index:51,this:this});captureLocals(exn44.stack[exn44.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn44}if($__R.mode)$__R.remainingStack++;if($__R.mode)return isOpaqueToDraw.box(h);else;$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app20=handlersArray.box.filter(fun11)}else if(target===53)app20=$__R.stack[$__R.stack.length-1].f()}catch(exn45){if(exn45 instanceof $__T.Capture){exn45.stack.push({kind:"rest",f:restoreNextFrame,index:53,this:this});captureLocals(exn45.stack[exn45.stack.length-1])}else{$__R.pushTrace("Line 63: in (anonymous function)")}throw exn45}if($__R.mode)drawer=app20[0];if($__R.mode&&drawer===$S.g.undefined||!$__R.mode&&target===54){try{if($__R.mode){app21=new $S.g.Error("Tried to draw() a reactor with no to-draw")}else if(target===54)app21=$__R.stack[$__R.stack.length-1].f()}catch(exn46){if(exn46 instanceof $__T.Capture){exn46.stack.push({kind:"rest",f:restoreNextFrame,index:54,this:this});captureLocals(exn46.stack[exn46.stack.length-1])}else{$__R.pushTrace("Line 67: in (anonymous function)")}throw exn46}if($__R.mode)$__R.pushTrace("Line 67: in (anonymous function)");throw app21}if($__R.mode)$__R.remainingStack++;if($__R.mode)return drawer.val.handler.app(init.box);else;$__R.remainingStack++;if(newTarget)return this};fun6=function funExpr12(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[fun12,newVal00,tracer,thisInteractTrace,arg00,arg01,arg02,arg03,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[fun12,newVal00,tracer,thisInteractTrace,arg00,arg01,arg02,arg03,newTarget]}var restoreNextFrame=()=>{return funExpr12.call(this)};var thisInteractTrace,tracer,fun12,newVal00,arg00,arg01,arg02,arg03;if($__R.mode){thisInteractTrace={box:undefined};thisInteractTrace.box=[];tracer=null}if($__R.mode&&tracing.box){if($__R.mode){fun12=function funExpr13(newVal,oldVal,k){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app25,app24,app23,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app25,app24,app23,newTarget]}var restoreNextFrame=()=>{return funExpr13.call(this,newVal,oldVal,k)};var app23,app24,app25;try{if($__R.mode){app23=$S.suspend()}else if(target===56)app23=$__R.stack[$__R.stack.length-1].f()}catch(exn47){if(exn47 instanceof $__T.Capture){exn47.stack.push({kind:"rest",f:restoreNextFrame,index:56,this:this});captureLocals(exn47.stack[exn47.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn47}try{if($__R.mode){app24=thisInteractTrace.box.push(newVal)}else if(target===57)app24=$__R.stack[$__R.stack.length-1].f()}catch(exn48){if(exn48 instanceof $__T.Capture){exn48.stack.push({kind:"rest",f:restoreNextFrame,index:57,this:this});captureLocals(exn48.stack[exn48.stack.length-1])}else{$__R.pushTrace("Line 76: in (anonymous function)")}throw exn48}try{if($__R.mode){app25=k()}else if(target===58)app25=$__R.stack[$__R.stack.length-1].f()}catch(exn49){if(exn49 instanceof $__T.Capture){exn49.stack.push({kind:"rest",f:restoreNextFrame,index:58,this:this});captureLocals(exn49.stack[exn49.stack.length-1])}else{$__R.pushTrace("Line 77: in (anonymous function)")}throw exn49}$__R.remainingStack++;if(newTarget)return this};tracer=fun12}}try{if($__R.mode){newVal00=bigBang.box(init.box,handlersArray.box,tracer)}else if(target===59)newVal00=$__R.stack[$__R.stack.length-1].f()}catch(exn50){if(exn50 instanceof $__T.Capture){exn50.stack.push({kind:"rest",f:restoreNextFrame,index:59,this:this});captureLocals(exn50.stack[exn50.stack.length-1])}else{$__R.pushTrace("Line 80: in (anonymous function)")}throw exn50}if($__R.mode){arg00=newVal00;arg01=handlersArray.box;arg02=tracing.box}try{if($__R.mode){arg03=trace.box.concat(thisInteractTrace.box)}else if(target===60)arg03=$__R.stack[$__R.stack.length-1].f()}catch(exn51){if(exn51 instanceof $__T.Capture){exn51.stack.push({kind:"rest",f:restoreNextFrame,index:60,this:this});captureLocals(exn51.stack[exn51.stack.length-1])}else{$__R.pushTrace("Line 81: in (anonymous function)")}throw exn51}if($__R.mode)$__R.remainingStack++;if($__R.mode)return makeReactorRaw.box(arg00,arg01,arg02,arg03);else;$__R.remainingStack++;if(newTarget)return this};fun7=function funExpr14(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index}function captureLocals(frame){}var restoreNextFrame=()=>{return funExpr14.call(this)};if($__R.mode)$__R.remainingStack++;if($__R.mode)return makeReactorRaw.box(init.box,handlersArray.box,true,[]);else;$__R.remainingStack++;if(newTarget)return this};fun8=function funExpr15(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index}function captureLocals(frame){}var restoreNextFrame=()=>{return funExpr15.call(this)};if($__R.mode)$__R.remainingStack++;if($__R.mode)return makeReactorRaw.box(init.box,handlersArray.box,false,[]);else;$__R.remainingStack++;if(newTarget)return this};fun9=function funExpr16(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index}function captureLocals(frame){}var restoreNextFrame=()=>{return funExpr16.call(this)};{let retval5=trace.box;$__R.remainingStack++;return newTarget&&!(retval5 instanceof Object)?this:retval5}$__R.remainingStack++;if(newTarget)return this};fun10=function funExpr17(event){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[fun13,app26,newTrace,app27,app28,ticker,result00,app30,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[fun13,app26,newTrace,app27,app28,ticker,result00,app30,newTarget]}var restoreNextFrame=()=>{return funExpr17.call(this,event)};var fun13,app26,ticker,app27,result00,newTrace,app28,app30;if($__R.mode&&event==="tick"||!$__R.mode&&(target===69||target===68||target===67||target===66)){if($__R.mode)fun13=function funExpr18(h){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app29,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app29,newTarget]}var restoreNextFrame=()=>{return funExpr18.call(this,h)};var app29;try{if($__R.mode){app29=$S.suspend()}else if(target===64)app29=$__R.stack[$__R.stack.length-1].f()}catch(exn52){if(exn52 instanceof $__T.Capture){exn52.stack.push({kind:"rest",f:restoreNextFrame,index:64,this:this});captureLocals(exn52.stack[exn52.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn52}if($__R.mode)$__R.remainingStack++;if($__R.mode)return isOpaqueOnTick.box(h);else;$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app26=handlersArray.box.filter(fun13)}else if(target===66)app26=$__R.stack[$__R.stack.length-1].f()}catch(exn53){if(exn53 instanceof $__T.Capture){exn53.stack.push({kind:"rest",f:restoreNextFrame,index:66,this:this});captureLocals(exn53.stack[exn53.stack.length-1])}else{$__R.pushTrace("Line 94: in (anonymous function)")}throw exn53}if($__R.mode)ticker=app26[0];if($__R.mode&&ticker===$S.g.undefined||!$__R.mode&&target===67){try{if($__R.mode){app27=new $S.g.Error("Tried to tick a reactor with no on-tick")}else if(target===67)app27=$__R.stack[$__R.stack.length-1].f()}catch(exn54){if(exn54 instanceof $__T.Capture){exn54.stack.push({kind:"rest",f:restoreNextFrame,index:67,this:this});captureLocals(exn54.stack[exn54.stack.length-1])}else{$__R.pushTrace("Line 98: in (anonymous function)")}throw exn54}if($__R.mode)$__R.pushTrace("Line 98: in (anonymous function)");throw app27}else if($__R.mode||!$__R.mode&&(target===69||target===68)){try{if($__R.mode){result00=ticker.val.handler.app(init.box)}else if(target===68)result00=$__R.stack[$__R.stack.length-1].f()}catch(exn55){if(exn55 instanceof $__T.Capture){exn55.stack.push({kind:"rest",f:restoreNextFrame,index:68,this:this});captureLocals(exn55.stack[exn55.stack.length-1])}else{$__R.pushTrace("Line 101: in (anonymous function)")}throw exn55}if($__R.mode)newTrace=trace.box;if($__R.mode&&tracing.box||!$__R.mode&&target===69){try{if($__R.mode){app28=trace.box.concat([result00])}else if(target===69)app28=$__R.stack[$__R.stack.length-1].f()}catch(exn56){if(exn56 instanceof $__T.Capture){exn56.stack.push({kind:"rest",f:restoreNextFrame,index:69,this:this});captureLocals(exn56.stack[exn56.stack.length-1])}else{$__R.pushTrace("Line 104: in (anonymous function)")}throw exn56}if($__R.mode)newTrace=app28}if($__R.mode)$__R.remainingStack++;if($__R.mode)return makeReactorRaw.box(result00,handlersArray.box,tracing.box,newTrace);else;}}else if($__R.mode||!$__R.mode&&target===71){try{if($__R.mode){app30=new $S.g.Error("Only the literal event \"tick\" is supported")}else if(target===71)app30=$__R.stack[$__R.stack.length-1].f()}catch(exn57){if(exn57 instanceof $__T.Capture){exn57.stack.push({kind:"rest",f:restoreNextFrame,index:71,this:this});captureLocals(exn57.stack[exn57.stack.length-1])}else{$__R.pushTrace("Line 110: in (anonymous function)")}throw exn57}if($__R.mode)$__R.pushTrace("Line 110: in (anonymous function)");throw app30}$__R.remainingStack++;if(newTarget)return this};self00={"get-value":fun4,"draw":fun5,interact:fun6,"start-trace":fun7,"stop-trace":fun8,"get-trace":fun9,react:fun10}}{let retval6=self00;$__R.remainingStack++;return newTarget&&!(retval6 instanceof Object)?this:retval6}$__R.remainingStack++;if(newTarget)return this};bigBangFromDict=makeBigBangFromDict.box(true);bigBangFromDictNoPauseResume=makeBigBangFromDict.box(false);makeBigBang=function funExpr19(shouldPauseAndResume){var fun15;shouldPauseAndResume={box:shouldPauseAndResume};fun15=function funExpr20(initW,handlers,tracer,title,insertNode){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app54,app55,app56,app46,app57,app47,app58,fun16,app48,fun17,app49,isOutputConfigSeen,i,outerToplevelNode,closeBigBangWindow,configs,toplevelNode,closeWhenStop,arg010,arg011,arg012,app50,app51,fun20,app52,fun21,app53,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app54,app55,app56,app46,app57,app47,app58,fun16,app48,fun17,app49,isOutputConfigSeen,i,outerToplevelNode,closeBigBangWindow,configs,toplevelNode,closeWhenStop,arg010,arg011,arg012,app50,app51,fun20,app52,fun21,app53,newTarget]}var restoreNextFrame=()=>{return funExpr20.call(this,initW,handlers,tracer,title,insertNode)};var closeBigBangWindow,toplevelNode,configs,closeWhenStop,app46,outerToplevelNode,fun16,app47,app48,app49,app50,isOutputConfigSeen,i,app51,app52,app53,arg010,app54,app55,app56,arg012,app58,arg011,app57,fun17,fun20,fun21;if($__R.mode){tracer={box:tracer};initW={box:initW};closeBigBangWindow={box:undefined};toplevelNode={box:undefined};configs={box:undefined};closeWhenStop={box:undefined}}try{if($__R.mode){app46=$S.suspend()}else if(target===74)app46=$__R.stack[$__R.stack.length-1].f()}catch(exn58){if(exn58 instanceof $__T.Capture){exn58.stack.push({kind:"rest",f:restoreNextFrame,index:74,this:this});captureLocals(exn58.stack[exn58.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn58}if($__R.mode)closeBigBangWindow.box=null;try{if($__R.mode){outerToplevelNode=$S.g.document.createElement("span")}else if(target===75)outerToplevelNode=$__R.stack[$__R.stack.length-1].f()}catch(exn59){if(exn59 instanceof $__T.Capture){exn59.stack.push({kind:"rest",f:restoreNextFrame,index:75,this:this});captureLocals(exn59.stack[exn59.stack.length-1])}else{$__R.pushTrace("Line 160: in (anonymous function)")}throw exn59}if($__R.mode)outerToplevelNode.style.padding="0px";if($__R.mode&&insertNode!==$S.g.undefined||!$__R.mode&&target===76){if($__R.mode)fun16=function funExpr21(closeWindow){closeBigBangWindow.box=closeWindow};try{if($__R.mode){app47=insertNode(outerToplevelNode,title,fun16)}else if(target===76)app47=$__R.stack[$__R.stack.length-1].f()}catch(exn60){if(exn60 instanceof $__T.Capture){exn60.stack.push({kind:"rest",f:restoreNextFrame,index:76,this:this});captureLocals(exn60.stack[exn60.stack.length-1])}else{$__R.pushTrace("Line 163: in (anonymous function)")}throw exn60}}else if($__R.mode||!$__R.mode&&target===77){try{if($__R.mode){app48=$S.g.document.body.appendChild(outerToplevelNode)}else if(target===77)app48=$__R.stack[$__R.stack.length-1].f()}catch(exn61){if(exn61 instanceof $__T.Capture){exn61.stack.push({kind:"rest",f:restoreNextFrame,index:77,this:this});captureLocals(exn61.stack[exn61.stack.length-1])}else{$__R.pushTrace("Line 170: in (anonymous function)")}throw exn61}}try{if($__R.mode){toplevelNode.box=$S.g.document.createElement("span")}else if(target===78)toplevelNode.box=$__R.stack[$__R.stack.length-1].f()}catch(exn62){if(exn62 instanceof $__T.Capture){exn62.stack.push({kind:"rest",f:restoreNextFrame,index:78,this:this});captureLocals(exn62.stack[exn62.stack.length-1])}else{$__R.pushTrace("Line 173: in (anonymous function)")}throw exn62}if($__R.mode)toplevelNode.box.style.padding="0px";try{if($__R.mode){app49=outerToplevelNode.appendChild(toplevelNode.box)}else if(target===79)app49=$__R.stack[$__R.stack.length-1].f()}catch(exn63){if(exn63 instanceof $__T.Capture){exn63.stack.push({kind:"rest",f:restoreNextFrame,index:79,this:this});captureLocals(exn63.stack[exn63.stack.length-1])}else{$__R.pushTrace("Line 175: in (anonymous function)")}throw exn63}if($__R.mode)outerToplevelNode.tabindex=1;try{if($__R.mode){app50=outerToplevelNode.focus()}else if(target===80)app50=$__R.stack[$__R.stack.length-1].f()}catch(exn64){if(exn64 instanceof $__T.Capture){exn64.stack.push({kind:"rest",f:restoreNextFrame,index:80,this:this});captureLocals(exn64.stack[exn64.stack.length-1])}else{$__R.pushTrace("Line 177: in (anonymous function)")}throw exn64}if($__R.mode){configs.box=[];isOutputConfigSeen=false;closeWhenStop.box=false;i=0}if($__R.mode||!$__R.mode&&(target===87||target===86||target===85||target===84||target===83||target===82||target===81))loop_break0:while($__R.mode&&i<handlers.length||!$__R.mode&&(target===87||target===86||target===85||target===84||target===83||target===82||target===81)){if($__R.mode||!$__R.mode&&(target===87||target===86||target===85||target===84||target===83||target===82||target===81))loop_continue0:{try{if($__R.mode){app51=$S.suspend()}else if(target===81)app51=$__R.stack[$__R.stack.length-1].f()}catch(exn65){if(exn65 instanceof $__T.Capture){exn65.stack.push({kind:"rest",f:restoreNextFrame,index:81,this:this});captureLocals(exn65.stack[exn65.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn65}try{if($__R.mode){app52=isOpaqueCloseWhenStopConfig.box(handlers[i])}else if(target===82)app52=$__R.stack[$__R.stack.length-1].f()}catch(exn66){if(exn66 instanceof $__T.Capture){exn66.stack.push({kind:"rest",f:restoreNextFrame,index:82,this:this});captureLocals(exn66.stack[exn66.stack.length-1])}else{$__R.pushTrace("Line 184: in (anonymous function)")}throw exn66}if($__R.mode&&app52){if($__R.mode)closeWhenStop.box=handlers[i].val.isClose}else if($__R.mode||!$__R.mode&&(target===86||target===85||target===84||target===83)){try{if($__R.mode){app53=isOpaqueWorldConfigOption.box(handlers[i])}else if(target===83)app53=$__R.stack[$__R.stack.length-1].f()}catch(exn67){if(exn67 instanceof $__T.Capture){exn67.stack.push({kind:"rest",f:restoreNextFrame,index:83,this:this});captureLocals(exn67.stack[exn67.stack.length-1])}else{$__R.pushTrace("Line 186: in (anonymous function)")}throw exn67}if($__R.mode&&app53||!$__R.mode&&(target===85||target===84)){try{if($__R.mode){arg010=handlers[i].val.toRawHandler(toplevelNode.box)}else if(target===84)arg010=$__R.stack[$__R.stack.length-1].f()}catch(exn68){if(exn68 instanceof $__T.Capture){exn68.stack.push({kind:"rest",f:restoreNextFrame,index:84,this:this});captureLocals(exn68.stack[exn68.stack.length-1])}else{$__R.pushTrace("Line 187: in (anonymous function)")}throw exn68}try{if($__R.mode){app54=configs.box.push(arg010)}else if(target===85)app54=$__R.stack[$__R.stack.length-1].f()}catch(exn69){if(exn69 instanceof $__T.Capture){exn69.stack.push({kind:"rest",f:restoreNextFrame,index:85,this:this});captureLocals(exn69.stack[exn69.stack.length-1])}else{$__R.pushTrace("Line 187: in (anonymous function)")}throw exn69}}else if($__R.mode||!$__R.mode&&target===86){try{if($__R.mode){app55=configs.box.push(handlers[i])}else if(target===86)app55=$__R.stack[$__R.stack.length-1].f()}catch(exn70){if(exn70 instanceof $__T.Capture){exn70.stack.push({kind:"rest",f:restoreNextFrame,index:86,this:this});captureLocals(exn70.stack[exn70.stack.length-1])}else{$__R.pushTrace("Line 190: in (anonymous function)")}throw exn70}}}try{if($__R.mode){app56=isOpaqueOutputConfig.box(handlers[i])}else if(target===87)app56=$__R.stack[$__R.stack.length-1].f()}catch(exn71){if(exn71 instanceof $__T.Capture){exn71.stack.push({kind:"rest",f:restoreNextFrame,index:87,this:this});captureLocals(exn71.stack[exn71.stack.length-1])}else{$__R.pushTrace("Line 192: in (anonymous function)")}throw exn71}if($__R.mode&&app56){if($__R.mode)isOutputConfigSeen=true}}if($__R.mode)i++}if($__R.mode&&!isOutputConfigSeen||!$__R.mode&&(target===90||target===89||target===88)){if($__R.mode)arg012=toplevelNode.box;try{if($__R.mode){app58=new DefaultDrawingOutput.box}else if(target===88)app58=$__R.stack[$__R.stack.length-1].f()}catch(exn72){if(exn72 instanceof $__T.Capture){exn72.stack.push({kind:"rest",f:restoreNextFrame,index:88,this:this});captureLocals(exn72.stack[exn72.stack.length-1])}else{$__R.pushTrace("Line 197: in (anonymous function)")}throw exn72}try{if($__R.mode){arg011=app58.toRawHandler(arg012)}else if(target===89)arg011=$__R.stack[$__R.stack.length-1].f()}catch(exn73){if(exn73 instanceof $__T.Capture){exn73.stack.push({kind:"rest",f:restoreNextFrame,index:89,this:this});captureLocals(exn73.stack[exn73.stack.length-1])}else{$__R.pushTrace("Line 197: in (anonymous function)")}throw exn73}try{if($__R.mode){app57=configs.box.push(arg011)}else if(target===90)app57=$__R.stack[$__R.stack.length-1].f()}catch(exn74){if(exn74 instanceof $__T.Capture){exn74.stack.push({kind:"rest",f:restoreNextFrame,index:90,this:this});captureLocals(exn74.stack[exn74.stack.length-1])}else{$__R.pushTrace("Line 197: in (anonymous function)")}throw exn74}}if($__R.mode&&shouldPauseAndResume.box){if($__R.mode){fun17=function funExpr22(restarter){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app60,fun19,app59,fun18,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app60,fun19,app59,fun18,newTarget]}var restoreNextFrame=()=>{return funExpr22.call(this,restarter)};var app59,fun18,fun19,app60;if($__R.mode)restarter={box:restarter};try{if($__R.mode){app59=$S.suspend()}else if(target===91)app59=$__R.stack[$__R.stack.length-1].f()}catch(exn75){if(exn75 instanceof $__T.Capture){exn75.stack.push({kind:"rest",f:restoreNextFrame,index:91,this:this});captureLocals(exn75.stack[exn75.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn75}if($__R.mode){fun18=function funExpr23(finalWorldValue){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app62,app61,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app62,app61,newTarget]}var restoreNextFrame=()=>{return funExpr23.call(this,finalWorldValue)};var app61,app62;try{if($__R.mode){app61=$S.suspend()}else if(target===92)app61=$__R.stack[$__R.stack.length-1].f()}catch(exn76){if(exn76 instanceof $__T.Capture){exn76.stack.push({kind:"rest",f:restoreNextFrame,index:92,this:this});captureLocals(exn76.stack[exn76.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn76}try{if($__R.mode){app62=restarter.box.resume(finalWorldValue)}else if(target===93)app62=$__R.stack[$__R.stack.length-1].f()}catch(exn77){if(exn77 instanceof $__T.Capture){exn77.stack.push({kind:"rest",f:restoreNextFrame,index:93,this:this});captureLocals(exn77.stack[exn77.stack.length-1])}else{$__R.pushTrace("Line 209: in (anonymous function)")}throw exn77}$__R.remainingStack++;if(newTarget)return this};fun19=function funExpr24(err){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app64,app63,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app64,app63,newTarget]}var restoreNextFrame=()=>{return funExpr24.call(this,err)};var app63,app64;try{if($__R.mode){app63=$S.suspend()}else if(target===94)app63=$__R.stack[$__R.stack.length-1].f()}catch(exn78){if(exn78 instanceof $__T.Capture){exn78.stack.push({kind:"rest",f:restoreNextFrame,index:94,this:this});captureLocals(exn78.stack[exn78.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn78}try{if($__R.mode){app64=restarter.box.error(err)}else if(target===95)app64=$__R.stack[$__R.stack.length-1].f()}catch(exn79){if(exn79 instanceof $__T.Capture){exn79.stack.push({kind:"rest",f:restoreNextFrame,index:95,this:this});captureLocals(exn79.stack[exn79.stack.length-1])}else{$__R.pushTrace("Line 212: in (anonymous function)")}throw exn79}$__R.remainingStack++;if(newTarget)return this}}try{if($__R.mode){app60=rawJsworld00.box.bigBang(toplevelNode.box,initW.box,configs.box,{},fun18,fun19,{closeWhenStop:closeWhenStop.box,closeBigBangWindow:closeBigBangWindow.box,tracer:tracer.box})}else if(target===96)app60=$__R.stack[$__R.stack.length-1].f()}catch(exn80){if(exn80 instanceof $__T.Capture){exn80.stack.push({kind:"rest",f:restoreNextFrame,index:96,this:this});captureLocals(exn80.stack[exn80.stack.length-1])}else{$__R.pushTrace("Line 203: in (anonymous function)")}throw exn80}$__R.remainingStack++;if(newTarget)return this};$__R.remainingStack++}if($__R.mode)return anchorRuntime00.box.pauseStack(fun17);else;}else if($__R.mode){if($__R.mode){fun20=function funExpr25(_){return};fun21=function funExpr26(_){return};$__R.remainingStack++}if($__R.mode)return rawJsworld00.box.bigBang(toplevelNode.box,initW.box,configs.box,{},fun20,fun21,{closeWhenStop:closeWhenStop.box,closeBigBangWindow:closeBigBangWindow.box,tracer:tracer.box});else;}$__R.remainingStack++;if(newTarget)return this};return fun15}}try{if($__R.mode){bigBang.box=makeBigBang(true)}else if(target===99)bigBang.box=$__R.stack[$__R.stack.length-1].f()}catch(exn81){if(exn81 instanceof $__T.Capture){exn81.stack.push({kind:"rest",f:restoreNextFrame,index:99,this:this});captureLocals(exn81.stack[exn81.stack.length-1])}else{$__R.pushTrace("Line 241: in (anonymous function)")}throw exn81}try{if($__R.mode){bigBangNoPauseResume.box=makeBigBang(false)}else if(target===100)bigBangNoPauseResume.box=$__R.stack[$__R.stack.length-1].f()}catch(exn82){if(exn82 instanceof $__T.Capture){exn82.stack.push({kind:"rest",f:restoreNextFrame,index:100,this:this});captureLocals(exn82.stack[exn82.stack.length-1])}else{$__R.pushTrace("Line 242: in (anonymous function)")}throw exn82}if($__R.mode){WorldConfigOption.box=function funExpr27(name00){this.name=name00};fun22=function funExpr28(config){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app99,app98,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app99,app98,newTarget]}var restoreNextFrame=()=>{return funExpr28.call(this,config)};var app98,app99;try{if($__R.mode){app98=$S.suspend()}else if(target===101)app98=$__R.stack[$__R.stack.length-1].f()}catch(exn83){if(exn83 instanceof $__T.Capture){exn83.stack.push({kind:"rest",f:restoreNextFrame,index:101,this:this});captureLocals(exn83.stack[exn83.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn83}try{if($__R.mode){app99=new $S.g.Error("unimplemented WorldConfigOption")}else if(target===102)app99=$__R.stack[$__R.stack.length-1].f()}catch(exn84){if(exn84 instanceof $__T.Capture){exn84.stack.push({kind:"rest",f:restoreNextFrame,index:102,this:this});captureLocals(exn84.stack[exn84.stack.length-1])}else{$__R.pushTrace("Line 257: in (anonymous function)")}throw exn84}if($__R.mode)$__R.pushTrace("Line 257: in (anonymous function)");throw app99;$__R.remainingStack++;if(newTarget)return this};WorldConfigOption.box.prototype.configure=fun22;fun23=function funExpr29(params){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app101,arg013,app100,span,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app101,arg013,app100,span,newTarget]}var restoreNextFrame=()=>{return funExpr29.call(this,params)};var app100,span,arg013,app101;try{if($__R.mode){app100=$S.suspend()}else if(target===103)app100=$__R.stack[$__R.stack.length-1].f()}catch(exn85){if(exn85 instanceof $__T.Capture){exn85.stack.push({kind:"rest",f:restoreNextFrame,index:103,this:this});captureLocals(exn85.stack[exn85.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn85}try{if($__R.mode){span=$S.g.document.createElement("span")}else if(target===104)span=$__R.stack[$__R.stack.length-1].f()}catch(exn86){if(exn86 instanceof $__T.Capture){exn86.stack.push({kind:"rest",f:restoreNextFrame,index:104,this:this});captureLocals(exn86.stack[exn86.stack.length-1])}else{$__R.pushTrace("Line 262: in (anonymous function)")}throw exn86}try{if($__R.mode){arg013=$S.g.document.createTextNode("("+this.name+" ...)")}else if(target===105)arg013=$__R.stack[$__R.stack.length-1].f()}catch(exn87){if(exn87 instanceof $__T.Capture){exn87.stack.push({kind:"rest",f:restoreNextFrame,index:105,this:this});captureLocals(exn87.stack[exn87.stack.length-1])}else{$__R.pushTrace("Line 263: in (anonymous function)")}throw exn87}try{if($__R.mode){app101=span.appendChild(arg013)}else if(target===106)app101=$__R.stack[$__R.stack.length-1].f()}catch(exn88){if(exn88 instanceof $__T.Capture){exn88.stack.push({kind:"rest",f:restoreNextFrame,index:106,this:this});captureLocals(exn88.stack[exn88.stack.length-1])}else{$__R.pushTrace("Line 263: in (anonymous function)")}throw exn88}{let retval7=span;$__R.remainingStack++;return newTarget&&!(retval7 instanceof Object)?this:retval7}$__R.remainingStack++;if(newTarget)return this};WorldConfigOption.box.prototype.toDomNode=fun23;fun24=function funExpr30(cache){return"("+this.name+" ...)"};WorldConfigOption.box.prototype.toWrittenString=fun24;fun25=function funExpr31(cache){return"("+this.name+" ...)"};WorldConfigOption.box.prototype.toDisplayedString=fun25;isWorldConfigOption.box=function funExpr32(v){return v instanceof WorldConfigOption.box};adaptWorldFunction.box=function funExpr33(worldFunction){var fun26;worldFunction={box:worldFunction};fun26=function funExpr34(){var success,pyretArgs,fun27,fun28,app65;success={box:undefined};pyretArgs={box:undefined};success.box=arguments[arguments.length-1];pyretArgs.box=[].slice.call(arguments,0,arguments.length-1);fun27=function funExpr35(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index}function captureLocals(frame){}var restoreNextFrame=()=>{return funExpr35.call(this)};if($__R.mode)$__R.remainingStack++;if($__R.mode)return worldFunction.box.apply(null,pyretArgs.box);else;$__R.remainingStack++;if(newTarget)return this};fun28=function funExpr36(result){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app67,app66,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app67,app66,newTarget]}var restoreNextFrame=()=>{return funExpr36.call(this,result)};var app66,app67;if($__R.mode&&result.type==="normal"||!$__R.mode&&target===109){try{if($__R.mode){app66=success.box(result.value)}else if(target===109)app66=$__R.stack[$__R.stack.length-1].f()}catch(exn89){if(exn89 instanceof $__T.Capture){exn89.stack.push({kind:"rest",f:restoreNextFrame,index:109,this:this});captureLocals(exn89.stack[exn89.stack.length-1])}else{$__R.pushTrace("Line 297: in (anonymous function)")}throw exn89}}else if($__R.mode||!$__R.mode&&target===110){try{if($__R.mode){app67=$S.g.console.error("Result was an error or not normal in reactor callback: ",result)}else if(target===110)app67=$__R.stack[$__R.stack.length-1].f()}catch(exn90){if(exn90 instanceof $__T.Capture){exn90.stack.push({kind:"rest",f:restoreNextFrame,index:110,this:this});captureLocals(exn90.stack[exn90.stack.length-1])}else{$__R.pushTrace("Line 300: in (anonymous function)")}throw exn90}}$__R.remainingStack++;if(newTarget)return this};app65=anchorRuntime00.box.run(fun27,fun28)};return fun26};OnTick.box=function funExpr37(handler,aDelay){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app69,app68,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app69,app68,newTarget]}var restoreNextFrame=()=>{return funExpr37.call(this,handler,aDelay)};var app68,app69;try{if($__R.mode){app68=$S.suspend()}else if(target===112)app68=$__R.stack[$__R.stack.length-1].f()}catch(exn91){if(exn91 instanceof $__T.Capture){exn91.stack.push({kind:"rest",f:restoreNextFrame,index:112,this:this});captureLocals(exn91.stack[exn91.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn91}try{if($__R.mode){app69=WorldConfigOption.box.call(this,"on-tick")}else if(target===113)app69=$__R.stack[$__R.stack.length-1].f()}catch(exn92){if(exn92 instanceof $__T.Capture){exn92.stack.push({kind:"rest",f:restoreNextFrame,index:113,this:this});captureLocals(exn92.stack[exn92.stack.length-1])}else{$__R.pushTrace("Line 310: in (anonymous function)")}throw exn92}if($__R.mode){this.handler=handler;this.delay=aDelay}$__R.remainingStack++;if(newTarget)return this}}try{if($__R.mode){app70=$S.g.Object.create(WorldConfigOption.box.prototype)}else if(target===114)app70=$__R.stack[$__R.stack.length-1].f()}catch(exn93){if(exn93 instanceof $__T.Capture){exn93.stack.push({kind:"rest",f:restoreNextFrame,index:114,this:this});captureLocals(exn93.stack[exn93.stack.length-1])}else{$__R.pushTrace("Line 315: in (anonymous function)")}throw exn93}if($__R.mode){OnTick.box.prototype=app70;fun29=function funExpr38(toplevelNode){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[worldFunction,that,app102,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[worldFunction,that,app102,newTarget]}var restoreNextFrame=()=>{return funExpr38.call(this,toplevelNode)};var app102,that,worldFunction;try{if($__R.mode){app102=$S.suspend()}else if(target===115)app102=$__R.stack[$__R.stack.length-1].f()}catch(exn94){if(exn94 instanceof $__T.Capture){exn94.stack.push({kind:"rest",f:restoreNextFrame,index:115,this:this});captureLocals(exn94.stack[exn94.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn94}if($__R.mode)that=this;try{if($__R.mode){worldFunction=adaptWorldFunction.box(that.handler)}else if(target===116)worldFunction=$__R.stack[$__R.stack.length-1].f()}catch(exn95){if(exn95 instanceof $__T.Capture){exn95.stack.push({kind:"rest",f:restoreNextFrame,index:116,this:this});captureLocals(exn95.stack[exn95.stack.length-1])}else{$__R.pushTrace("Line 319: in (anonymous function)")}throw exn95}if($__R.mode)$__R.remainingStack++;if($__R.mode)return rawJsworld00.box.on_tick(this.delay,worldFunction);else;$__R.remainingStack++;if(newTarget)return this};OnTick.box.prototype.toRawHandler=fun29;OnKey.box=function funExpr39(handler){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app72,app71,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app72,app71,newTarget]}var restoreNextFrame=()=>{return funExpr39.call(this,handler)};var app71,app72;try{if($__R.mode){app71=$S.suspend()}else if(target===118)app71=$__R.stack[$__R.stack.length-1].f()}catch(exn96){if(exn96 instanceof $__T.Capture){exn96.stack.push({kind:"rest",f:restoreNextFrame,index:118,this:this});captureLocals(exn96.stack[exn96.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn96}try{if($__R.mode){app72=WorldConfigOption.box.call(this,"on-key")}else if(target===119)app72=$__R.stack[$__R.stack.length-1].f()}catch(exn97){if(exn97 instanceof $__T.Capture){exn97.stack.push({kind:"rest",f:restoreNextFrame,index:119,this:this});captureLocals(exn97.stack[exn97.stack.length-1])}else{$__R.pushTrace("Line 326: in (anonymous function)")}throw exn97}if($__R.mode)this.handler=handler;$__R.remainingStack++;if(newTarget)return this}}try{if($__R.mode){app73=$S.g.Object.create(WorldConfigOption.box.prototype)}else if(target===120)app73=$__R.stack[$__R.stack.length-1].f()}catch(exn98){if(exn98 instanceof $__T.Capture){exn98.stack.push({kind:"rest",f:restoreNextFrame,index:120,this:this});captureLocals(exn98.stack[exn98.stack.length-1])}else{$__R.pushTrace("Line 330: in (anonymous function)")}throw exn98}if($__R.mode){OnKey.box.prototype=app73;fun30=function funExpr40(toplevelNode){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[fun45,that,worldFunction,app103,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[fun45,that,worldFunction,app103,newTarget]}var restoreNextFrame=()=>{return funExpr40.call(this,toplevelNode)};var worldFunction,app103,that,fun45;if($__R.mode)worldFunction={box:undefined};try{if($__R.mode){app103=$S.suspend()}else if(target===121)app103=$__R.stack[$__R.stack.length-1].f()}catch(exn99){if(exn99 instanceof $__T.Capture){exn99.stack.push({kind:"rest",f:restoreNextFrame,index:121,this:this});captureLocals(exn99.stack[exn99.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn99}if($__R.mode)that=this;try{if($__R.mode){worldFunction.box=adaptWorldFunction.box(that.handler)}else if(target===122)worldFunction.box=$__R.stack[$__R.stack.length-1].f()}catch(exn100){if(exn100 instanceof $__T.Capture){exn100.stack.push({kind:"rest",f:restoreNextFrame,index:122,this:this});captureLocals(exn100.stack[exn100.stack.length-1])}else{$__R.pushTrace("Line 334: in (anonymous function)")}throw exn100}if($__R.mode){fun45=function funExpr41(w,e,success){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app104,app105,arg014,arg015,arg016,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app104,app105,arg014,arg015,arg016,newTarget]}var restoreNextFrame=()=>{return funExpr41.call(this,w,e,success)};var app104,arg014,arg015,arg016,app105;try{if($__R.mode){app104=$S.suspend()}else if(target===123)app104=$__R.stack[$__R.stack.length-1].f()}catch(exn101){if(exn101 instanceof $__T.Capture){exn101.stack.push({kind:"rest",f:restoreNextFrame,index:123,this:this});captureLocals(exn101.stack[exn101.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn101}if($__R.mode)arg014=w;try{if($__R.mode){arg015=getKeyCodeName.box(e)}else if(target===124)arg015=$__R.stack[$__R.stack.length-1].f()}catch(exn102){if(exn102 instanceof $__T.Capture){exn102.stack.push({kind:"rest",f:restoreNextFrame,index:124,this:this});captureLocals(exn102.stack[exn102.stack.length-1])}else{$__R.pushTrace("Line 337: in (anonymous function)")}throw exn102}if($__R.mode)arg016=success;try{if($__R.mode){app105=worldFunction.box(arg014,arg015,arg016)}else if(target===125)app105=$__R.stack[$__R.stack.length-1].f()}catch(exn103){if(exn103 instanceof $__T.Capture){exn103.stack.push({kind:"rest",f:restoreNextFrame,index:125,this:this});captureLocals(exn103.stack[exn103.stack.length-1])}else{$__R.pushTrace("Line 337: in (anonymous function)")}throw exn103}$__R.remainingStack++;if(newTarget)return this};$__R.remainingStack++}if($__R.mode)return rawJsworld00.box.on_key(fun45);else;$__R.remainingStack++;if(newTarget)return this};OnKey.box.prototype.toRawHandler=fun30;getKeyCodeName.box=function funExpr42(e){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app76,app77,keyname,_fallthrough,code,_test,app74,app75,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app76,app77,keyname,_fallthrough,code,_test,app74,app75,newTarget]}var restoreNextFrame=()=>{return funExpr42.call(this,e)};var app74,code,keyname,_test,_fallthrough,app75,app76,app77;try{if($__R.mode){app74=$S.suspend()}else if(target===127)app74=$__R.stack[$__R.stack.length-1].f()}catch(exn104){if(exn104 instanceof $__T.Capture){exn104.stack.push({kind:"rest",f:restoreNextFrame,index:127,this:this});captureLocals(exn104.stack[exn104.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn104}if($__R.mode)code=e.charCode||e.keyCode;if($__R.mode||!$__R.mode&&(target===130||target===129||target===128))_switch:{if($__R.mode){_test=code;_fallthrough=false}if($__R.mode&&(_test===8||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="backspace"}break _switch}if($__R.mode&&(_test===9||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="tab"}break _switch}if($__R.mode&&(_test===13||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="enter"}break _switch}if($__R.mode&&(_test===16||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="shift"}break _switch}if($__R.mode&&(_test===17||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="control"}break _switch}if($__R.mode&&(_test===19||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="pause"}break _switch}if($__R.mode&&(_test===27||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="escape"}break _switch}if($__R.mode&&(_test===33||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="prior"}break _switch}if($__R.mode&&(_test===34||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="next"}break _switch}if($__R.mode&&(_test===35||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="end"}break _switch}if($__R.mode&&(_test===36||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="home"}break _switch}if($__R.mode&&(_test===37||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="left"}break _switch}if($__R.mode&&(_test===38||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="up"}break _switch}if($__R.mode&&(_test===39||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="right"}break _switch}if($__R.mode&&(_test===40||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="down"}break _switch}if($__R.mode&&(_test===42||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="print"}break _switch}if($__R.mode&&(_test===45||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="insert"}break _switch}if($__R.mode&&(_test===46||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="delete"}break _switch}if($__R.mode&&(_test===106||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="*"}break _switch}if($__R.mode&&(_test===107||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="+"}break _switch}if($__R.mode&&(_test===109||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="-"}break _switch}if($__R.mode&&(_test===110||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="."}break _switch}if($__R.mode&&(_test===111||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="/"}break _switch}if($__R.mode&&(_test===144||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="numlock"}break _switch}if($__R.mode&&(_test===145||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="scroll"}break _switch}if($__R.mode&&(_test===186||_fallthrough)){if($__R.mode){_fallthrough=true;keyname=";"}break _switch}if($__R.mode&&(_test===187||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="="}break _switch}if($__R.mode&&(_test===188||_fallthrough)){if($__R.mode){_fallthrough=true;keyname=","}break _switch}if($__R.mode&&(_test===189||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="-"}break _switch}if($__R.mode&&(_test===190||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="."}break _switch}if($__R.mode&&(_test===191||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="/"}break _switch}if($__R.mode&&(_test===192||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="`"}break _switch}if($__R.mode&&(_test===219||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="["}break _switch}if($__R.mode&&(_test===220||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="\\"}break _switch}if($__R.mode&&(_test===221||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="]"}break _switch}if($__R.mode&&(_test===222||_fallthrough)){if($__R.mode){_fallthrough=true;keyname="'"}break _switch}if($__R.mode&&code>=96&&code<=105||!$__R.mode&&target===128){try{if($__R.mode){app75=(code-96).toString()}else if(target===128)app75=$__R.stack[$__R.stack.length-1].f()}catch(exn105){if(exn105 instanceof $__T.Capture){exn105.stack.push({kind:"rest",f:restoreNextFrame,index:128,this:this});captureLocals(exn105.stack[exn105.stack.length-1])}else{$__R.pushTrace("Line 384: in (anonymous function)")}throw exn105}if($__R.mode)keyname=app75}else if($__R.mode||!$__R.mode&&(target===130||target===129)){if($__R.mode&&code>=112&&code<=123){if($__R.mode)keyname="f"+(code-111)}else if($__R.mode||!$__R.mode&&(target===130||target===129)){try{if($__R.mode){app76=$S.g.String.fromCharCode(code)}else if(target===129)app76=$__R.stack[$__R.stack.length-1].f()}catch(exn106){if(exn106 instanceof $__T.Capture){exn106.stack.push({kind:"rest",f:restoreNextFrame,index:129,this:this});captureLocals(exn106.stack[exn106.stack.length-1])}else{$__R.pushTrace("Line 388: in (anonymous function)")}throw exn106}try{if($__R.mode){app77=app76.toLowerCase()}else if(target===130)app77=$__R.stack[$__R.stack.length-1].f()}catch(exn107){if(exn107 instanceof $__T.Capture){exn107.stack.push({kind:"rest",f:restoreNextFrame,index:130,this:this});captureLocals(exn107.stack[exn107.stack.length-1])}else{$__R.pushTrace("Line 388: in (anonymous function)")}throw exn107}if($__R.mode)keyname=app77}}break _switch}{let retval8=keyname;$__R.remainingStack++;return newTarget&&!(retval8 instanceof Object)?this:retval8}$__R.remainingStack++;if(newTarget)return this};OnMouse.box=function funExpr43(handler){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app79,app78,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app79,app78,newTarget]}var restoreNextFrame=()=>{return funExpr43.call(this,handler)};var app78,app79;try{if($__R.mode){app78=$S.suspend()}else if(target===131)app78=$__R.stack[$__R.stack.length-1].f()}catch(exn108){if(exn108 instanceof $__T.Capture){exn108.stack.push({kind:"rest",f:restoreNextFrame,index:131,this:this});captureLocals(exn108.stack[exn108.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn108}try{if($__R.mode){app79=WorldConfigOption.box.call(this,"on-mouse")}else if(target===132)app79=$__R.stack[$__R.stack.length-1].f()}catch(exn109){if(exn109 instanceof $__T.Capture){exn109.stack.push({kind:"rest",f:restoreNextFrame,index:132,this:this});captureLocals(exn109.stack[exn109.stack.length-1])}else{$__R.pushTrace("Line 401: in (anonymous function)")}throw exn109}if($__R.mode)this.handler=handler;$__R.remainingStack++;if(newTarget)return this}}try{if($__R.mode){app80=$S.g.Object.create(WorldConfigOption.box.prototype)}else if(target===133)app80=$__R.stack[$__R.stack.length-1].f()}catch(exn110){if(exn110 instanceof $__T.Capture){exn110.stack.push({kind:"rest",f:restoreNextFrame,index:133,this:this});captureLocals(exn110.stack[exn110.stack.length-1])}else{$__R.pushTrace("Line 405: in (anonymous function)")}throw exn110}if($__R.mode){OnMouse.box.prototype=app80;fun31=function funExpr44(toplevelNode){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[fun46,that,worldFunction,app106,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[fun46,that,worldFunction,app106,newTarget]}var restoreNextFrame=()=>{return funExpr44.call(this,toplevelNode)};var worldFunction,app106,that,fun46;if($__R.mode)worldFunction={box:undefined};try{if($__R.mode){app106=$S.suspend()}else if(target===134)app106=$__R.stack[$__R.stack.length-1].f()}catch(exn111){if(exn111 instanceof $__T.Capture){exn111.stack.push({kind:"rest",f:restoreNextFrame,index:134,this:this});captureLocals(exn111.stack[exn111.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn111}if($__R.mode)that=this;try{if($__R.mode){worldFunction.box=adaptWorldFunction.box(that.handler)}else if(target===135)worldFunction.box=$__R.stack[$__R.stack.length-1].f()}catch(exn112){if(exn112 instanceof $__T.Capture){exn112.stack.push({kind:"rest",f:restoreNextFrame,index:135,this:this});captureLocals(exn112.stack[exn112.stack.length-1])}else{$__R.pushTrace("Line 409: in (anonymous function)")}throw exn112}if($__R.mode){fun46=function funExpr45(w,x,y,type,success){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app108,app107,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app108,app107,newTarget]}var restoreNextFrame=()=>{return funExpr45.call(this,w,x,y,type,success)};var app107,app108;try{if($__R.mode){app107=$S.suspend()}else if(target===136)app107=$__R.stack[$__R.stack.length-1].f()}catch(exn113){if(exn113 instanceof $__T.Capture){exn113.stack.push({kind:"rest",f:restoreNextFrame,index:136,this:this});captureLocals(exn113.stack[exn113.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn113}try{if($__R.mode){app108=worldFunction.box(w,x,y,type,success)}else if(target===137)app108=$__R.stack[$__R.stack.length-1].f()}catch(exn114){if(exn114 instanceof $__T.Capture){exn114.stack.push({kind:"rest",f:restoreNextFrame,index:137,this:this});captureLocals(exn114.stack[exn114.stack.length-1])}else{$__R.pushTrace("Line 412: in (anonymous function)")}throw exn114}$__R.remainingStack++;if(newTarget)return this};$__R.remainingStack++}if($__R.mode)return rawJsworld00.box.on_mouse(fun46);else;$__R.remainingStack++;if(newTarget)return this};OnMouse.box.prototype.toRawHandler=fun31;OutputConfig.box=function funExpr46(){}}try{if($__R.mode){app81=$S.g.Object.create(WorldConfigOption.box.prototype)}else if(target===139)app81=$__R.stack[$__R.stack.length-1].f()}catch(exn115){if(exn115 instanceof $__T.Capture){exn115.stack.push({kind:"rest",f:restoreNextFrame,index:139,this:this});captureLocals(exn115.stack[exn115.stack.length-1])}else{$__R.pushTrace("Line 424: in (anonymous function)")}throw exn115}if($__R.mode){OutputConfig.box.prototype=app81;isOutputConfig.box=function funExpr47(v){return v instanceof OutputConfig.box};isOpaqueOutputConfig.box=function funExpr48(v){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app83,and3,app82,x03,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app83,and3,app82,x03,newTarget]}var restoreNextFrame=()=>{return funExpr48.call(this,v)};var app82,x03,and3,app83;try{if($__R.mode){app82=$S.suspend()}else if(target===140)app82=$__R.stack[$__R.stack.length-1].f()}catch(exn116){if(exn116 instanceof $__T.Capture){exn116.stack.push({kind:"rest",f:restoreNextFrame,index:140,this:this});captureLocals(exn116.stack[exn116.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn116}if($__R.mode)x03=isOpaque.box(v);if($__R.mode&&x03||!$__R.mode&&target===142){try{if($__R.mode){app83=isOutputConfig.box(v.val)}else if(target===142)app83=$__R.stack[$__R.stack.length-1].f()}catch(exn117){if(exn117 instanceof $__T.Capture){exn117.stack.push({kind:"rest",f:restoreNextFrame,index:142,this:this});captureLocals(exn117.stack[exn117.stack.length-1])}else{$__R.pushTrace("Line 427: in (anonymous function)")}throw exn117}if($__R.mode)and3=app83}else if($__R.mode){if($__R.mode)and3=x03}{let retval9=and3;$__R.remainingStack++;return newTarget&&!(retval9 instanceof Object)?this:retval9}$__R.remainingStack++;if(newTarget)return this};ToDraw.box=function funExpr49(handler){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app85,app84,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app85,app84,newTarget]}var restoreNextFrame=()=>{return funExpr49.call(this,handler)};var app84,app85;try{if($__R.mode){app84=$S.suspend()}else if(target===143)app84=$__R.stack[$__R.stack.length-1].f()}catch(exn118){if(exn118 instanceof $__T.Capture){exn118.stack.push({kind:"rest",f:restoreNextFrame,index:143,this:this});captureLocals(exn118.stack[exn118.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn118}try{if($__R.mode){app85=WorldConfigOption.box.call(this,"to-draw")}else if(target===144)app85=$__R.stack[$__R.stack.length-1].f()}catch(exn119){if(exn119 instanceof $__T.Capture){exn119.stack.push({kind:"rest",f:restoreNextFrame,index:144,this:this});captureLocals(exn119.stack[exn119.stack.length-1])}else{$__R.pushTrace("Line 437: in (anonymous function)")}throw exn119}if($__R.mode)this.handler=handler;$__R.remainingStack++;if(newTarget)return this}}try{if($__R.mode){app86=$S.g.Object.create(OutputConfig.box.prototype)}else if(target===145)app86=$__R.stack[$__R.stack.length-1].f()}catch(exn120){if(exn120 instanceof $__T.Capture){exn120.stack.push({kind:"rest",f:restoreNextFrame,index:145,this:this});captureLocals(exn120.stack[exn120.stack.length-1])}else{$__R.pushTrace("Line 441: in (anonymous function)")}throw exn120}if($__R.mode){ToDraw.box.prototype=app86;fun32=function funExpr50(toplevelNode){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[reusableCanvas,reusableCanvasNode,that,adaptedWorldFunction,worldFunction,app109,cssFunction,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[reusableCanvas,reusableCanvasNode,that,adaptedWorldFunction,worldFunction,app109,cssFunction,newTarget]}var restoreNextFrame=()=>{return funExpr50.call(this,toplevelNode)};var reusableCanvas,reusableCanvasNode,adaptedWorldFunction,app109,that,worldFunction,cssFunction;if($__R.mode){toplevelNode={box:toplevelNode};reusableCanvas={box:undefined};reusableCanvasNode={box:undefined};adaptedWorldFunction={box:undefined}}try{if($__R.mode){app109=$S.suspend()}else if(target===146)app109=$__R.stack[$__R.stack.length-1].f()}catch(exn121){if(exn121 instanceof $__T.Capture){exn121.stack.push({kind:"rest",f:restoreNextFrame,index:146,this:this});captureLocals(exn121.stack[exn121.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn121}if($__R.mode)that=this;try{if($__R.mode){adaptedWorldFunction.box=adaptWorldFunction.box(this.handler)}else if(target===147)adaptedWorldFunction.box=$__R.stack[$__R.stack.length-1].f()}catch(exn122){if(exn122 instanceof $__T.Capture){exn122.stack.push({kind:"rest",f:restoreNextFrame,index:147,this:this});captureLocals(exn122.stack[exn122.stack.length-1])}else{$__R.pushTrace("Line 447: in (anonymous function)")}throw exn122}if($__R.mode){worldFunction=function funExpr51(world,success){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app111,fun47,app110,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app111,fun47,app110,newTarget]}var restoreNextFrame=()=>{return funExpr51.call(this,world,success)};var app110,fun47,app111;if($__R.mode)success={box:success};try{if($__R.mode){app110=$S.suspend()}else if(target===148)app110=$__R.stack[$__R.stack.length-1].f()}catch(exn123){if(exn123 instanceof $__T.Capture){exn123.stack.push({kind:"rest",f:restoreNextFrame,index:148,this:this});captureLocals(exn123.stack[exn123.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn123}if($__R.mode)fun47=function funExpr52(v){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[width,height,ctx,theImage,checkImageType,app120,app121,app112,app114,app115,checkImagePred,app116,app117,app118,app119,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[width,height,ctx,theImage,checkImageType,app120,app121,app112,app114,app115,checkImagePred,app116,app117,app118,app119,newTarget]}var restoreNextFrame=()=>{return funExpr52.call(this,v)};var app112,checkImagePred,checkImageType,app114,theImage,width,height,app115,app116,ctx,app117,app118,app119,app120,app121;try{if($__R.mode){app112=$S.suspend()}else if(target===149)app112=$__R.stack[$__R.stack.length-1].f()}catch(exn124){if(exn124 instanceof $__T.Capture){exn124.stack.push({kind:"rest",f:restoreNextFrame,index:149,this:this});captureLocals(exn124.stack[exn124.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn124}if($__R.mode)checkImagePred=function funExpr53(val){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app113,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app113,newTarget]}var restoreNextFrame=()=>{return funExpr53.call(this,val)};var app113;try{if($__R.mode){app113=$S.suspend()}else if(target===150)app113=$__R.stack[$__R.stack.length-1].f()}catch(exn125){if(exn125 instanceof $__T.Capture){exn125.stack.push({kind:"rest",f:restoreNextFrame,index:150,this:this});captureLocals(exn125.stack[exn125.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn125}if($__R.mode)$__R.remainingStack++;if($__R.mode)return isImage.box(val);else;$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){checkImageType=makeCheckType.box(checkImagePred,"Image")}else if(target===152)checkImageType=$__R.stack[$__R.stack.length-1].f()}catch(exn126){if(exn126 instanceof $__T.Capture){exn126.stack.push({kind:"rest",f:restoreNextFrame,index:152,this:this});captureLocals(exn126.stack[exn126.stack.length-1])}else{$__R.pushTrace("Line 461: in (anonymous function)")}throw exn126}try{if($__R.mode){app114=checkImageType(v)}else if(target===153)app114=$__R.stack[$__R.stack.length-1].f()}catch(exn127){if(exn127 instanceof $__T.Capture){exn127.stack.push({kind:"rest",f:restoreNextFrame,index:153,this:this});captureLocals(exn127.stack[exn127.stack.length-1])}else{$__R.pushTrace("Line 462: in (anonymous function)")}throw exn127}if($__R.mode)theImage=v;try{if($__R.mode){width=theImage.getWidth()}else if(target===154)width=$__R.stack[$__R.stack.length-1].f()}catch(exn128){if(exn128 instanceof $__T.Capture){exn128.stack.push({kind:"rest",f:restoreNextFrame,index:154,this:this});captureLocals(exn128.stack[exn128.stack.length-1])}else{$__R.pushTrace("Line 465: in (anonymous function)")}throw exn128}try{if($__R.mode){height=theImage.getHeight()}else if(target===155)height=$__R.stack[$__R.stack.length-1].f()}catch(exn129){if(exn129 instanceof $__T.Capture){exn129.stack.push({kind:"rest",f:restoreNextFrame,index:155,this:this});captureLocals(exn129.stack[exn129.stack.length-1])}else{$__R.pushTrace("Line 466: in (anonymous function)")}throw exn129}if($__R.mode&&!reusableCanvas.box||!$__R.mode&&(target===157||target===156)){try{if($__R.mode){app115=imageLibrary00.box.makeCanvas(width,height)}else if(target===156)app115=$__R.stack[$__R.stack.length-1].f()}catch(exn130){if(exn130 instanceof $__T.Capture){exn130.stack.push({kind:"rest",f:restoreNextFrame,index:156,this:this});captureLocals(exn130.stack[exn130.stack.length-1])}else{$__R.pushTrace("Line 469: in (anonymous function)")}throw exn130}if($__R.mode){reusableCanvas.box=app115;reusableCanvas.box.jsworldOpaque=true}try{if($__R.mode){app116=rawJsworld00.box.node_to_tree(reusableCanvas.box)}else if(target===157)app116=$__R.stack[$__R.stack.length-1].f()}catch(exn131){if(exn131 instanceof $__T.Capture){exn131.stack.push({kind:"rest",f:restoreNextFrame,index:157,this:this});captureLocals(exn131.stack[exn131.stack.length-1])}else{$__R.pushTrace("Line 474: in (anonymous function)")}throw exn131}if($__R.mode)reusableCanvasNode.box=app116}if($__R.mode&&reusableCanvas.box.width!==width){if($__R.mode)reusableCanvas.box.width=width}if($__R.mode&&reusableCanvas.box.height!==height){if($__R.mode)reusableCanvas.box.height=height}try{if($__R.mode){ctx=reusableCanvas.box.getContext("2d")}else if(target===158)ctx=$__R.stack[$__R.stack.length-1].f()}catch(exn132){if(exn132 instanceof $__T.Capture){exn132.stack.push({kind:"rest",f:restoreNextFrame,index:158,this:this});captureLocals(exn132.stack[exn132.stack.length-1])}else{$__R.pushTrace("Line 482: in (anonymous function)")}throw exn132}try{if($__R.mode){app117=ctx.save()}else if(target===159)app117=$__R.stack[$__R.stack.length-1].f()}catch(exn133){if(exn133 instanceof $__T.Capture){exn133.stack.push({kind:"rest",f:restoreNextFrame,index:159,this:this});captureLocals(exn133.stack[exn133.stack.length-1])}else{$__R.pushTrace("Line 483: in (anonymous function)")}throw exn133}if($__R.mode)ctx.fillStyle="rgba(255,255,255,1)";try{if($__R.mode){app118=ctx.fillRect(0,0,width,height)}else if(target===160)app118=$__R.stack[$__R.stack.length-1].f()}catch(exn134){if(exn134 instanceof $__T.Capture){exn134.stack.push({kind:"rest",f:restoreNextFrame,index:160,this:this});captureLocals(exn134.stack[exn134.stack.length-1])}else{$__R.pushTrace("Line 485: in (anonymous function)")}throw exn134}try{if($__R.mode){app119=ctx.restore()}else if(target===161)app119=$__R.stack[$__R.stack.length-1].f()}catch(exn135){if(exn135 instanceof $__T.Capture){exn135.stack.push({kind:"rest",f:restoreNextFrame,index:161,this:this});captureLocals(exn135.stack[exn135.stack.length-1])}else{$__R.pushTrace("Line 486: in (anonymous function)")}throw exn135}try{if($__R.mode){app120=theImage.render(ctx,0,0)}else if(target===162)app120=$__R.stack[$__R.stack.length-1].f()}catch(exn136){if(exn136 instanceof $__T.Capture){exn136.stack.push({kind:"rest",f:restoreNextFrame,index:162,this:this});captureLocals(exn136.stack[exn136.stack.length-1])}else{$__R.pushTrace("Line 487: in (anonymous function)")}throw exn136}try{if($__R.mode){app121=success.box([toplevelNode.box,reusableCanvasNode.box])}else if(target===163)app121=$__R.stack[$__R.stack.length-1].f()}catch(exn137){if(exn137 instanceof $__T.Capture){exn137.stack.push({kind:"rest",f:restoreNextFrame,index:163,this:this});captureLocals(exn137.stack[exn137.stack.length-1])}else{$__R.pushTrace("Line 488: in (anonymous function)")}throw exn137}$__R.remainingStack++;if(newTarget)return this};try{if($__R.mode){app111=adaptedWorldFunction.box(world,fun47)}else if(target===164)app111=$__R.stack[$__R.stack.length-1].f()}catch(exn138){if(exn138 instanceof $__T.Capture){exn138.stack.push({kind:"rest",f:restoreNextFrame,index:164,this:this});captureLocals(exn138.stack[exn138.stack.length-1])}else{$__R.pushTrace("Line 451: in (anonymous function)")}throw exn138}$__R.remainingStack++;if(newTarget)return this};cssFunction=function funExpr54(w,k){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app124,app123,app122,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app124,app123,app122,newTarget]}var restoreNextFrame=()=>{return funExpr54.call(this,w,k)};var app122,app123,app124;try{if($__R.mode){app122=$S.suspend()}else if(target===165)app122=$__R.stack[$__R.stack.length-1].f()}catch(exn139){if(exn139 instanceof $__T.Capture){exn139.stack.push({kind:"rest",f:restoreNextFrame,index:165,this:this});captureLocals(exn139.stack[exn139.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn139}if($__R.mode&&reusableCanvas.box||!$__R.mode&&target===166){try{if($__R.mode){app123=k([[reusableCanvas.box,["padding","0px"],["width",reusableCanvas.box.width+"px"],["height",reusableCanvas.box.height+"px"]]])}else if(target===166)app123=$__R.stack[$__R.stack.length-1].f()}catch(exn140){if(exn140 instanceof $__T.Capture){exn140.stack.push({kind:"rest",f:restoreNextFrame,index:166,this:this});captureLocals(exn140.stack[exn140.stack.length-1])}else{$__R.pushTrace("Line 494: in (anonymous function)")}throw exn140}}else if($__R.mode||!$__R.mode&&target===167){try{if($__R.mode){app124=k([])}else if(target===167)app124=$__R.stack[$__R.stack.length-1].f()}catch(exn141){if(exn141 instanceof $__T.Capture){exn141.stack.push({kind:"rest",f:restoreNextFrame,index:167,this:this});captureLocals(exn141.stack[exn141.stack.length-1])}else{$__R.pushTrace("Line 499: in (anonymous function)")}throw exn141}}$__R.remainingStack++;if(newTarget)return this};$__R.remainingStack++}if($__R.mode)return rawJsworld00.box.on_draw(worldFunction,cssFunction);else;$__R.remainingStack++;if(newTarget)return this};ToDraw.box.prototype.toRawHandler=fun32;DefaultDrawingOutput.box=function funExpr55(){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app88,app87,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app88,app87,newTarget]}var restoreNextFrame=()=>{return funExpr55.call(this)};var app87,app88;try{if($__R.mode){app87=$S.suspend()}else if(target===169)app87=$__R.stack[$__R.stack.length-1].f()}catch(exn142){if(exn142 instanceof $__T.Capture){exn142.stack.push({kind:"rest",f:restoreNextFrame,index:169,this:this});captureLocals(exn142.stack[exn142.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn142}try{if($__R.mode){app88=WorldConfigOption.box.call(this,"to-draw")}else if(target===170)app88=$__R.stack[$__R.stack.length-1].f()}catch(exn143){if(exn143 instanceof $__T.Capture){exn143.stack.push({kind:"rest",f:restoreNextFrame,index:170,this:this});captureLocals(exn143.stack[exn143.stack.length-1])}else{$__R.pushTrace("Line 513: in (anonymous function)")}throw exn143}$__R.remainingStack++;if(newTarget)return this}}try{if($__R.mode){app89=$S.g.Object.create(WorldConfigOption.box.prototype)}else if(target===171)app89=$__R.stack[$__R.stack.length-1].f()}catch(exn144){if(exn144 instanceof $__T.Capture){exn144.stack.push({kind:"rest",f:restoreNextFrame,index:171,this:this});captureLocals(exn144.stack[exn144.stack.length-1])}else{$__R.pushTrace("Line 516: in (anonymous function)")}throw exn144}if($__R.mode){DefaultDrawingOutput.box.prototype=app89;fun33=function funExpr56(toplevelNode){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[cssFunction,worldFunction,app125,that,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[cssFunction,worldFunction,app125,that,newTarget]}var restoreNextFrame=()=>{return funExpr56.call(this,toplevelNode)};var app125,that,worldFunction,cssFunction;if($__R.mode)toplevelNode={box:toplevelNode};try{if($__R.mode){app125=$S.suspend()}else if(target===172)app125=$__R.stack[$__R.stack.length-1].f()}catch(exn145){if(exn145 instanceof $__T.Capture){exn145.stack.push({kind:"rest",f:restoreNextFrame,index:172,this:this});captureLocals(exn145.stack[exn145.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn145}if($__R.mode){that=this;worldFunction=function funExpr57(world,success){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[arg017,textNode,str00,app126,element0,app127,element1,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[arg017,textNode,str00,app126,element0,app127,element1,newTarget]}var restoreNextFrame=()=>{return funExpr57.call(this,world,success)};var app126,textNode,str00,element0,element1,arg017,app127;try{if($__R.mode){app126=$S.suspend()}else if(target===173)app126=$__R.stack[$__R.stack.length-1].f()}catch(exn146){if(exn146 instanceof $__T.Capture){exn146.stack.push({kind:"rest",f:restoreNextFrame,index:173,this:this});captureLocals(exn146.stack[exn146.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn146}try{if($__R.mode){textNode=$S.g.document.createElement("pre")}else if(target===174)textNode=$__R.stack[$__R.stack.length-1].f()}catch(exn147){if(exn147 instanceof $__T.Capture){exn147.stack.push({kind:"rest",f:restoreNextFrame,index:174,this:this});captureLocals(exn147.stack[exn147.stack.length-1])}else{$__R.pushTrace("Line 521: in (anonymous function)")}throw exn147}try{if($__R.mode){str00=$S.g.JSON.stringify(world)}else if(target===175)str00=$__R.stack[$__R.stack.length-1].f()}catch(exn148){if(exn148 instanceof $__T.Capture){exn148.stack.push({kind:"rest",f:restoreNextFrame,index:175,this:this});captureLocals(exn148.stack[exn148.stack.length-1])}else{$__R.pushTrace("Line 522: in (anonymous function)")}throw exn148}if($__R.mode){textNode.innerText=str00;element0=toplevelNode.box}try{if($__R.mode){element1=rawJsworld00.box.node_to_tree(textNode)}else if(target===176)element1=$__R.stack[$__R.stack.length-1].f()}catch(exn149){if(exn149 instanceof $__T.Capture){exn149.stack.push({kind:"rest",f:restoreNextFrame,index:176,this:this});captureLocals(exn149.stack[exn149.stack.length-1])}else{$__R.pushTrace("Line 525: in (anonymous function)")}throw exn149}if($__R.mode)arg017=[element0,element1];try{if($__R.mode){app127=success(arg017)}else if(target===177)app127=$__R.stack[$__R.stack.length-1].f()}catch(exn150){if(exn150 instanceof $__T.Capture){exn150.stack.push({kind:"rest",f:restoreNextFrame,index:177,this:this});captureLocals(exn150.stack[exn150.stack.length-1])}else{$__R.pushTrace("Line 524: in (anonymous function)")}throw exn150}{let retval10;$__R.remainingStack++;return newTarget&&!(retval10 instanceof Object)?this:retval10}$__R.remainingStack++;if(newTarget)return this};cssFunction=function funExpr58(w,success){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app129,app128,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app129,app128,newTarget]}var restoreNextFrame=()=>{return funExpr58.call(this,w,success)};var app128,app129;try{if($__R.mode){app128=$S.suspend()}else if(target===178)app128=$__R.stack[$__R.stack.length-1].f()}catch(exn151){if(exn151 instanceof $__T.Capture){exn151.stack.push({kind:"rest",f:restoreNextFrame,index:178,this:this});captureLocals(exn151.stack[exn151.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn151}try{if($__R.mode){app129=success([])}else if(target===179)app129=$__R.stack[$__R.stack.length-1].f()}catch(exn152){if(exn152 instanceof $__T.Capture){exn152.stack.push({kind:"rest",f:restoreNextFrame,index:179,this:this});captureLocals(exn152.stack[exn152.stack.length-1])}else{$__R.pushTrace("Line 528: in (anonymous function)")}throw exn152}$__R.remainingStack++;if(newTarget)return this};$__R.remainingStack++}if($__R.mode)return rawJsworld00.box.on_draw(worldFunction,cssFunction);else;$__R.remainingStack++;if(newTarget)return this};DefaultDrawingOutput.box.prototype.toRawHandler=fun33;CloseWhenStop.box=function funExpr59(isClose){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app91,app90,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app91,app90,newTarget]}var restoreNextFrame=()=>{return funExpr59.call(this,isClose)};var app90,app91;try{if($__R.mode){app90=$S.suspend()}else if(target===181)app90=$__R.stack[$__R.stack.length-1].f()}catch(exn153){if(exn153 instanceof $__T.Capture){exn153.stack.push({kind:"rest",f:restoreNextFrame,index:181,this:this});captureLocals(exn153.stack[exn153.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn153}try{if($__R.mode){app91=WorldConfigOption.box.call(this,"close-when-stop")}else if(target===182)app91=$__R.stack[$__R.stack.length-1].f()}catch(exn154){if(exn154 instanceof $__T.Capture){exn154.stack.push({kind:"rest",f:restoreNextFrame,index:182,this:this});captureLocals(exn154.stack[exn154.stack.length-1])}else{$__R.pushTrace("Line 538: in (anonymous function)")}throw exn154}if($__R.mode)this.isClose=isClose===true;$__R.remainingStack++;if(newTarget)return this}}try{if($__R.mode){app92=$S.g.Object.create(WorldConfigOption.box.prototype)}else if(target===183)app92=$__R.stack[$__R.stack.length-1].f()}catch(exn155){if(exn155 instanceof $__T.Capture){exn155.stack.push({kind:"rest",f:restoreNextFrame,index:183,this:this});captureLocals(exn155.stack[exn155.stack.length-1])}else{$__R.pushTrace("Line 542: in (anonymous function)")}throw exn155}if($__R.mode){CloseWhenStop.box.prototype=app92;isCloseWhenStopConfig.box=function funExpr60(v){return v instanceof CloseWhenStop.box};isOpaqueCloseWhenStopConfig.box=function funExpr61(v){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app94,and4,app93,x04,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app94,and4,app93,x04,newTarget]}var restoreNextFrame=()=>{return funExpr61.call(this,v)};var app93,x04,and4,app94;try{if($__R.mode){app93=$S.suspend()}else if(target===184)app93=$__R.stack[$__R.stack.length-1].f()}catch(exn156){if(exn156 instanceof $__T.Capture){exn156.stack.push({kind:"rest",f:restoreNextFrame,index:184,this:this});captureLocals(exn156.stack[exn156.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn156}if($__R.mode)x04=isOpaque.box(v);if($__R.mode&&x04||!$__R.mode&&target===186){try{if($__R.mode){app94=isCloseWhenStopConfig.box(v.val)}else if(target===186)app94=$__R.stack[$__R.stack.length-1].f()}catch(exn157){if(exn157 instanceof $__T.Capture){exn157.stack.push({kind:"rest",f:restoreNextFrame,index:186,this:this});captureLocals(exn157.stack[exn157.stack.length-1])}else{$__R.pushTrace("Line 546: in (anonymous function)")}throw exn157}if($__R.mode)and4=app94}else if($__R.mode){if($__R.mode)and4=x04}{let retval11=and4;$__R.remainingStack++;return newTarget&&!(retval11 instanceof Object)?this:retval11}$__R.remainingStack++;if(newTarget)return this};StopWhen.box=function funExpr62(handler){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app96,app95,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app96,app95,newTarget]}var restoreNextFrame=()=>{return funExpr62.call(this,handler)};var app95,app96;try{if($__R.mode){app95=$S.suspend()}else if(target===187)app95=$__R.stack[$__R.stack.length-1].f()}catch(exn158){if(exn158 instanceof $__T.Capture){exn158.stack.push({kind:"rest",f:restoreNextFrame,index:187,this:this});captureLocals(exn158.stack[exn158.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn158}try{if($__R.mode){app96=WorldConfigOption.box.call(this,"stop-when")}else if(target===188)app96=$__R.stack[$__R.stack.length-1].f()}catch(exn159){if(exn159 instanceof $__T.Capture){exn159.stack.push({kind:"rest",f:restoreNextFrame,index:188,this:this});captureLocals(exn159.stack[exn159.stack.length-1])}else{$__R.pushTrace("Line 550: in (anonymous function)")}throw exn159}if($__R.mode)this.handler=handler;$__R.remainingStack++;if(newTarget)return this}}try{if($__R.mode){app97=$S.g.Object.create(WorldConfigOption.box.prototype)}else if(target===189)app97=$__R.stack[$__R.stack.length-1].f()}catch(exn160){if(exn160 instanceof $__T.Capture){exn160.stack.push({kind:"rest",f:restoreNextFrame,index:189,this:this});captureLocals(exn160.stack[exn160.stack.length-1])}else{$__R.pushTrace("Line 554: in (anonymous function)")}throw exn160}if($__R.mode){StopWhen.box.prototype=app97;fun34=function funExpr63(toplevelNode){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[worldFunction,that,app130,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[worldFunction,that,app130,newTarget]}var restoreNextFrame=()=>{return funExpr63.call(this,toplevelNode)};var app130,that,worldFunction;try{if($__R.mode){app130=$S.suspend()}else if(target===190)app130=$__R.stack[$__R.stack.length-1].f()}catch(exn161){if(exn161 instanceof $__T.Capture){exn161.stack.push({kind:"rest",f:restoreNextFrame,index:190,this:this});captureLocals(exn161.stack[exn161.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn161}if($__R.mode)that=this;try{if($__R.mode){worldFunction=adaptWorldFunction.box(that.handler)}else if(target===191)worldFunction=$__R.stack[$__R.stack.length-1].f()}catch(exn162){if(exn162 instanceof $__T.Capture){exn162.stack.push({kind:"rest",f:restoreNextFrame,index:191,this:this});captureLocals(exn162.stack[exn162.stack.length-1])}else{$__R.pushTrace("Line 558: in (anonymous function)")}throw exn162}if($__R.mode)$__R.remainingStack++;if($__R.mode)return rawJsworld00.box.stop_when(worldFunction);else;$__R.remainingStack++;if(newTarget)return this};StopWhen.box.prototype.toRawHandler=fun34}try{if($__R.mode){checkHandler.box=makeCheckType.box(isOpaqueWorldConfigOption.box,"WorldConfigOption")}else if(target===193)checkHandler.box=$__R.stack[$__R.stack.length-1].f()}catch(exn163){if(exn163 instanceof $__T.Capture){exn163.stack.push({kind:"rest",f:restoreNextFrame,index:193,this:this});captureLocals(exn163.stack[exn163.stack.length-1])}else{$__R.pushTrace("Line 562: in (anonymous function)")}throw exn163}if($__R.mode){DEFAULT_TICK_DELAY.box=1/28;fun35=function funExpr64(init,handlers){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app131,fun48,initialWorldValue,arr,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app131,fun48,initialWorldValue,arr,newTarget]}var restoreNextFrame=()=>{return funExpr64.call(this,init,handlers)};var arr,initialWorldValue,fun48,app131;if($__R.mode){arr=handlers;initialWorldValue=init;fun48=function funExpr65(h){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app133,app132,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app133,app132,newTarget]}var restoreNextFrame=()=>{return funExpr65.call(this,h)};var app132,app133;try{if($__R.mode){app132=$S.suspend()}else if(target===194)app132=$__R.stack[$__R.stack.length-1].f()}catch(exn164){if(exn164 instanceof $__T.Capture){exn164.stack.push({kind:"rest",f:restoreNextFrame,index:194,this:this});captureLocals(exn164.stack[exn164.stack.length-1])}else{$__R.pushTrace(": in (anonymous function)")}throw exn164}try{if($__R.mode){app133=checkHandler.box(h)}else if(target===195)app133=$__R.stack[$__R.stack.length-1].f()}catch(exn165){if(exn165 instanceof $__T.Capture){exn165.stack.push({kind:"rest",f:restoreNextFrame,index:195,this:this});captureLocals(exn165.stack[exn165.stack.length-1])}else{$__R.pushTrace("Line 574: in (anonymous function)")}throw exn165}$__R.remainingStack++;if(newTarget)return this}}try{if($__R.mode){app131=arr.map(fun48)}else if(target===196)app131=$__R.stack[$__R.stack.length-1].f()}catch(exn166){if(exn166 instanceof $__T.Capture){exn166.stack.push({kind:"rest",f:restoreNextFrame,index:196,this:this});captureLocals(exn166.stack[exn166.stack.length-1])}else{$__R.pushTrace("Line 574: in (anonymous function)")}throw exn166}if($__R.mode)$__R.remainingStack++;if($__R.mode)return bigBang.box(initialWorldValue,arr,null,"big-bang");else;$__R.remainingStack++;if(newTarget)return this};fun36=function funExpr66(handler){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[arg018,app134,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[arg018,app134,newTarget]}var restoreNextFrame=()=>{return funExpr66.call(this,handler)};var app134,arg018;try{if($__R.mode){app134=$S.g.Math.floor(DEFAULT_TICK_DELAY.box*1000)}else if(target===198)app134=$__R.stack[$__R.stack.length-1].f()}catch(exn167){if(exn167 instanceof $__T.Capture){exn167.stack.push({kind:"rest",f:restoreNextFrame,index:198,this:this});captureLocals(exn167.stack[exn167.stack.length-1])}else{$__R.pushTrace("Line 578: in (anonymous function)")}throw exn167}try{if($__R.mode){arg018=new OnTick.box(handler,app134)}else if(target===199)arg018=$__R.stack[$__R.stack.length-1].f()}catch(exn168){if(exn168 instanceof $__T.Capture){exn168.stack.push({kind:"rest",f:restoreNextFrame,index:199,this:this});captureLocals(exn168.stack[exn168.stack.length-1])}else{$__R.pushTrace("Line 578: in (anonymous function)")}throw exn168}if($__R.mode)$__R.remainingStack++;if($__R.mode)return makeOpaque.box(arg018);else;$__R.remainingStack++;if(newTarget)return this};fun37=function funExpr67(handler,n){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[arg019,fixN,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[arg019,fixN,newTarget]}var restoreNextFrame=()=>{return funExpr67.call(this,handler,n)};var fixN,arg019;try{if($__R.mode){fixN=jsnums00.box.toFixnum(n)}else if(target===201)fixN=$__R.stack[$__R.stack.length-1].f()}catch(exn169){if(exn169 instanceof $__T.Capture){exn169.stack.push({kind:"rest",f:restoreNextFrame,index:201,this:this});captureLocals(exn169.stack[exn169.stack.length-1])}else{$__R.pushTrace("Line 581: in (anonymous function)")}throw exn169}try{if($__R.mode){arg019=new OnTick.box(handler,fixN*1000)}else if(target===202)arg019=$__R.stack[$__R.stack.length-1].f()}catch(exn170){if(exn170 instanceof $__T.Capture){exn170.stack.push({kind:"rest",f:restoreNextFrame,index:202,this:this});captureLocals(exn170.stack[exn170.stack.length-1])}else{$__R.pushTrace("Line 582: in (anonymous function)")}throw exn170}if($__R.mode)$__R.remainingStack++;if($__R.mode)return makeOpaque.box(arg019);else;$__R.remainingStack++;if(newTarget)return this};fun38=function funExpr68(drawer){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[arg020,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[arg020,newTarget]}var restoreNextFrame=()=>{return funExpr68.call(this,drawer)};var arg020;try{if($__R.mode){arg020=new ToDraw.box(drawer)}else if(target===204)arg020=$__R.stack[$__R.stack.length-1].f()}catch(exn171){if(exn171 instanceof $__T.Capture){exn171.stack.push({kind:"rest",f:restoreNextFrame,index:204,this:this});captureLocals(exn171.stack[exn171.stack.length-1])}else{$__R.pushTrace("Line 585: in (anonymous function)")}throw exn171}if($__R.mode)$__R.remainingStack++;if($__R.mode)return makeOpaque.box(arg020);else;$__R.remainingStack++;if(newTarget)return this};fun39=function funExpr69(stopper){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[arg021,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[arg021,newTarget]}var restoreNextFrame=()=>{return funExpr69.call(this,stopper)};var arg021;try{if($__R.mode){arg021=new StopWhen.box(stopper)}else if(target===206)arg021=$__R.stack[$__R.stack.length-1].f()}catch(exn172){if(exn172 instanceof $__T.Capture){exn172.stack.push({kind:"rest",f:restoreNextFrame,index:206,this:this});captureLocals(exn172.stack[exn172.stack.length-1])}else{$__R.pushTrace("Line 588: in (anonymous function)")}throw exn172}if($__R.mode)$__R.remainingStack++;if($__R.mode)return makeOpaque.box(arg021);else;$__R.remainingStack++;if(newTarget)return this};fun40=function funExpr70(isClose){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[arg022,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[arg022,newTarget]}var restoreNextFrame=()=>{return funExpr70.call(this,isClose)};var arg022;try{if($__R.mode){arg022=new CloseWhenStop.box(isClose)}else if(target===208)arg022=$__R.stack[$__R.stack.length-1].f()}catch(exn173){if(exn173 instanceof $__T.Capture){exn173.stack.push({kind:"rest",f:restoreNextFrame,index:208,this:this});captureLocals(exn173.stack[exn173.stack.length-1])}else{$__R.pushTrace("Line 591: in (anonymous function)")}throw exn173}if($__R.mode)$__R.remainingStack++;if($__R.mode)return makeOpaque.box(arg022);else;$__R.remainingStack++;if(newTarget)return this};fun41=function funExpr71(onKey){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[arg023,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[arg023,newTarget]}var restoreNextFrame=()=>{return funExpr71.call(this,onKey)};var arg023;try{if($__R.mode){arg023=new OnKey.box(onKey)}else if(target===210)arg023=$__R.stack[$__R.stack.length-1].f()}catch(exn174){if(exn174 instanceof $__T.Capture){exn174.stack.push({kind:"rest",f:restoreNextFrame,index:210,this:this});captureLocals(exn174.stack[exn174.stack.length-1])}else{$__R.pushTrace("Line 594: in (anonymous function)")}throw exn174}if($__R.mode)$__R.remainingStack++;if($__R.mode)return makeOpaque.box(arg023);else;$__R.remainingStack++;if(newTarget)return this};fun42=function funExpr72(onMouse){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[arg024,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[arg024,newTarget]}var restoreNextFrame=()=>{return funExpr72.call(this,onMouse)};var arg024;try{if($__R.mode){arg024=new OnMouse.box(onMouse)}else if(target===212)arg024=$__R.stack[$__R.stack.length-1].f()}catch(exn175){if(exn175 instanceof $__T.Capture){exn175.stack.push({kind:"rest",f:restoreNextFrame,index:212,this:this});captureLocals(exn175.stack[exn175.stack.length-1])}else{$__R.pushTrace("Line 597: in (anonymous function)")}throw exn175}if($__R.mode)$__R.remainingStack++;if($__R.mode)return makeOpaque.box(arg024);else;$__R.remainingStack++;if(newTarget)return this};fun43=function funExpr73(v){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index}function captureLocals(frame){}var restoreNextFrame=()=>{return funExpr73.call(this,v)};if($__R.mode&&!isOpaque.box(v)){{let retval12=false;$__R.remainingStack++;return newTarget&&!(retval12 instanceof Object)?this:retval12}}if($__R.mode)$__R.remainingStack++;if($__R.mode)return isWorldConfigOption.box(v.val);else;$__R.remainingStack++;if(newTarget)return this};fun44=function funExpr74(key1,key2){var newTarget=new.target;var target=null;var $frame=null;$__R.remainingStack--;if(!$__R.mode){$frame=$__R.stack.pop();target=$frame.index;[app138,app137,app136,app135,newTarget]=$frame.locals}function captureLocals(frame){frame.locals=[app138,app137,app136,app135,newTarget]}var restoreNextFrame=()=>{return funExpr74.call(this,key1,key2)};var app135,app136,app137,app138;try{if($__R.mode){app135=key1.toString()}else if(target===216)app135=$__R.stack[$__R.stack.length-1].f()}catch(exn176){if(exn176 instanceof $__T.Capture){exn176.stack.push({kind:"rest",f:restoreNextFrame,index:216,this:this});captureLocals(exn176.stack[exn176.stack.length-1])}else{$__R.pushTrace("Line 604: in (anonymous function)")}throw exn176}try{if($__R.mode){app136=app135.toLowerCase()}else if(target===217)app136=$__R.stack[$__R.stack.length-1].f()}catch(exn177){if(exn177 instanceof $__T.Capture){exn177.stack.push({kind:"rest",f:restoreNextFrame,index:217,this:this});captureLocals(exn177.stack[exn177.stack.length-1])}else{$__R.pushTrace("Line 604: in (anonymous function)")}throw exn177}try{if($__R.mode){app137=key2.toString()}else if(target===218)app137=$__R.stack[$__R.stack.length-1].f()}catch(exn178){if(exn178 instanceof $__T.Capture){exn178.stack.push({kind:"rest",f:restoreNextFrame,index:218,this:this});captureLocals(exn178.stack[exn178.stack.length-1])}else{$__R.pushTrace("Line 604: in (anonymous function)")}throw exn178}try{if($__R.mode){app138=app137.toLowerCase()}else if(target===219)app138=$__R.stack[$__R.stack.length-1].f()}catch(exn179){if(exn179 instanceof $__T.Capture){exn179.stack.push({kind:"rest",f:restoreNextFrame,index:219,this:this});captureLocals(exn179.stack[exn179.stack.length-1])}else{$__R.pushTrace("Line 604: in (anonymous function)")}throw exn179}{let retval13=app136===app138;$__R.remainingStack++;return newTarget&&!(retval13 instanceof Object)?this:retval13}$__R.remainingStack++;if(newTarget)return this};$S.g.module.exports={"reactor":makeReactor,"big-bang":fun35,"on-tick":fun36,"on-tick-n":fun37,"to-draw":fun38,"stop-when":fun39,"close-when-stop":fun40,"on-key":fun41,"on-mouse":fun42,"is-world-config":fun43,"is-key-equal":fun44,$WorldConfigOption:WorldConfigOption.box,$adaptWorldFunction:adaptWorldFunction.box,$bigBangFromDict:bigBangFromDict,$bigBangFromDictNoPauseResume:bigBangFromDictNoPauseResume,$shutdown:rawJsworld00.box.shutdown}}$__R.remainingStack++;if(newTarget)return this};$__R.remainingStack++}if($__R.mode)return fun1();else;$__R.remainingStack++;if(newTarget)return this};if($__R.mode)fun0;